(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs/internal/Subject'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ngx-tetris', ['exports', '@angular/core', 'rxjs/internal/Subject', '@angular/common'], factory) :
    (factory((global['ngx-tetris'] = {}),global.ng.core,global.rxjs['internal/Subject'],global.ng.common));
}(this, (function (exports,core,Subject,common) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @enum {number} */
    var PieceRotation = {
        DEG_0: 0,
        DEG_90: 1,
        DEG_180: 2,
        DEG_270: 3,
    };
    PieceRotation[PieceRotation.DEG_0] = 'DEG_0';
    PieceRotation[PieceRotation.DEG_90] = 'DEG_90';
    PieceRotation[PieceRotation.DEG_180] = 'DEG_180';
    PieceRotation[PieceRotation.DEG_270] = 'DEG_270';
    /** @enum {number} */
    var PieceTypes = {
        Dot: 1,
        Box: 2,
        Line: 3,
        T: 4,
        L: 5,
        Lr: 6,
        Z: 7,
        S: 8,
    };
    PieceTypes[PieceTypes.Dot] = 'Dot';
    PieceTypes[PieceTypes.Box] = 'Box';
    PieceTypes[PieceTypes.Line] = 'Line';
    PieceTypes[PieceTypes.T] = 'T';
    PieceTypes[PieceTypes.L] = 'L';
    PieceTypes[PieceTypes.Lr] = 'Lr';
    PieceTypes[PieceTypes.Z] = 'Z';
    PieceTypes[PieceTypes.S] = 'S';
    /** @enum {string} */
    var PieceColors = {
        Box: 'color-box',
        Dot: 'color-dot',
        Line: 'color-line',
        T: 'color-t',
        L: 'color-l',
        Lr: 'color-lr',
        Z: 'color-z',
        S: 'color-s',
    };
    var Piece = (function () {
        function Piece(x, y, gridSize, maps) {
            this.color = 'red';
            this.rotation = PieceRotation.DEG_0;
            this.map = [
                [], []
            ];
            this._lastConfig = null;
            this._gridSize = gridSize;
            this.x = x;
            this.y = y;
            this._maps = maps;
            this.map = this._maps[this.rotation];
        }
        Object.defineProperty(Piece.prototype, "positionsOnGrid", {
            get: /**
             * @return {?}
             */ function () {
                /** @type {?} */
                var acc = [];
                for (var row = 0; row < 4; row++) {
                    for (var col = 0; col < 4; col++) {
                        if (this.map[row][col]) {
                            /** @type {?} */
                            var pos = (this.y + row) * this._gridSize.width + this.x + col;
                            if (pos > 0) {
                                acc.push(pos);
                            }
                        }
                    }
                }
                return acc;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        Piece.prototype.store = /**
         * @return {?}
         */
            function () {
                this._lastConfig = {
                    x: this.x,
                    y: this.y,
                    rotation: this.rotation,
                    map: this.map
                };
            };
        /**
         * @return {?}
         */
        Piece.prototype.clearStore = /**
         * @return {?}
         */
            function () {
                this._lastConfig = null;
            };
        /**
         * @return {?}
         */
        Piece.prototype.revert = /**
         * @return {?}
         */
            function () {
                if (this._lastConfig) {
                    for (var x in this._lastConfig) {
                        if (this._lastConfig.hasOwnProperty(x)) {
                            this[x] = this._lastConfig[x];
                        }
                    }
                    this._lastConfig = null;
                }
            };
        /**
         * @return {?}
         */
        Piece.prototype.rotate = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var keys = Object.keys(this._maps);
                /** @type {?} */
                var idx = keys.indexOf(this.rotation.toString());
                if (idx >= keys.length - 1) {
                    this.rotation = /** @type {?} */ (keys[0]);
                }
                else {
                    this.rotation = /** @type {?} */ (keys[++idx]);
                }
                this.map = this._maps[this.rotation];
            };
        /**
         * @return {?}
         */
        Piece.prototype.moveDown = /**
         * @return {?}
         */
            function () {
                this.y++;
            };
        /**
         * @return {?}
         */
        Piece.prototype.moveRight = /**
         * @return {?}
         */
            function () {
                this.x++;
            };
        /**
         * @return {?}
         */
        Piece.prototype.moveLeft = /**
         * @return {?}
         */
            function () {
                this.x--;
            };
        Object.defineProperty(Piece.prototype, "bottomRow", {
            get: /**
             * @return {?}
             */ function () {
                return this.y + 3;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Piece.prototype, "rightCol", {
            get: /**
             * @return {?}
             */ function () {
                /** @type {?} */
                var col = 3;
                while (col >= 0) {
                    for (var row = 0; row <= 3; row++) {
                        if (this.map[row][col]) {
                            return this.x + col;
                        }
                    }
                    col--;
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Piece.prototype, "leftCol", {
            get: /**
             * @return {?}
             */ function () {
                return this.x;
            },
            enumerable: true,
            configurable: true
        });
        return Piece;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS = [];
    MAPS[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Box, undefined, undefined, undefined],
    ];
    var Dot = (function (_super) {
        __extends(Dot, _super);
        function Dot(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS) || this;
            _this.color = PieceColors['Dot'];
            return _this;
        }
        return Dot;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$1 = [];
    MAPS$1[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Box, PieceTypes.Box, undefined, undefined],
        [PieceTypes.Box, PieceTypes.Box, undefined, undefined],
    ];
    var Box = (function (_super) {
        __extends(Box, _super);
        function Box(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$1) || this;
            _this.color = PieceColors['Box'];
            return _this;
        }
        return Box;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$2 = [];
    MAPS$2[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Line, PieceTypes.Line, PieceTypes.Line, PieceTypes.Line],
    ];
    MAPS$2[PieceRotation.DEG_90] = [
        [PieceTypes.Line, undefined, undefined, undefined],
        [PieceTypes.Line, undefined, undefined, undefined],
        [PieceTypes.Line, undefined, undefined, undefined],
        [PieceTypes.Line, undefined, undefined, undefined],
    ];
    var Line = (function (_super) {
        __extends(Line, _super);
        function Line(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$2) || this;
            _this.color = PieceColors['Line'];
            return _this;
        }
        return Line;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$3 = {};
    MAPS$3[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, PieceTypes.T, undefined, undefined],
        [PieceTypes.T, PieceTypes.T, PieceTypes.T, undefined],
    ];
    MAPS$3[PieceRotation.DEG_90] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.T, undefined, undefined, undefined],
        [PieceTypes.T, PieceTypes.T, undefined, undefined],
        [PieceTypes.T, undefined, undefined, undefined],
    ];
    MAPS$3[PieceRotation.DEG_180] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.T, PieceTypes.T, PieceTypes.T, undefined],
        [undefined, PieceTypes.T, undefined, undefined],
    ];
    MAPS$3[PieceRotation.DEG_270] = [
        [undefined, undefined, undefined, undefined],
        [undefined, PieceTypes.T, undefined, undefined],
        [PieceTypes.T, PieceTypes.T, undefined, undefined],
        [undefined, PieceTypes.T, undefined, undefined],
    ];
    var T = (function (_super) {
        __extends(T, _super);
        function T(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$3) || this;
            _this.color = PieceColors['T'];
            return _this;
        }
        return T;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$4 = {};
    MAPS$4[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [undefined, PieceTypes.Z, undefined, undefined],
        [PieceTypes.Z, PieceTypes.Z, undefined, undefined],
        [PieceTypes.Z, undefined, undefined, undefined],
    ];
    MAPS$4[PieceRotation.DEG_90] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Z, PieceTypes.Z, undefined, undefined],
        [undefined, PieceTypes.Z, PieceTypes.Z, undefined],
    ];
    var Z = (function (_super) {
        __extends(Z, _super);
        function Z(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$4) || this;
            _this.color = PieceColors['Z'];
            return _this;
        }
        return Z;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$5 = {};
    MAPS$5[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.S, undefined, undefined, undefined],
        [PieceTypes.S, PieceTypes.S, undefined, undefined],
        [undefined, PieceTypes.S, undefined, undefined],
    ];
    MAPS$5[PieceRotation.DEG_90] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, PieceTypes.S, PieceTypes.S, undefined],
        [PieceTypes.S, PieceTypes.S, undefined, undefined],
    ];
    var S = (function (_super) {
        __extends(S, _super);
        function S(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$5) || this;
            _this.color = PieceColors['S'];
            return _this;
        }
        return S;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$6 = {};
    MAPS$6[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.L, undefined, undefined, undefined],
        [PieceTypes.L, undefined, undefined, undefined],
        [PieceTypes.L, PieceTypes.L, undefined, undefined],
    ];
    MAPS$6[PieceRotation.DEG_90] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.L, PieceTypes.L, PieceTypes.L, undefined],
        [PieceTypes.L, undefined, undefined, undefined],
    ];
    MAPS$6[PieceRotation.DEG_180] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.L, PieceTypes.L, undefined, undefined],
        [undefined, PieceTypes.L, undefined, undefined],
        [undefined, PieceTypes.L, undefined, undefined],
    ];
    MAPS$6[PieceRotation.DEG_270] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, PieceTypes.L, undefined],
        [PieceTypes.L, PieceTypes.L, PieceTypes.L, undefined],
    ];
    var L = (function (_super) {
        __extends(L, _super);
        function L(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$6) || this;
            _this.color = PieceColors['L'];
            return _this;
        }
        return L;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MAPS$7 = {};
    MAPS$7[PieceRotation.DEG_0] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Lr, PieceTypes.Lr, undefined, undefined],
        [undefined, PieceTypes.Lr, undefined, undefined],
        [undefined, PieceTypes.Lr, undefined, undefined],
    ];
    MAPS$7[PieceRotation.DEG_90] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, PieceTypes.Lr, undefined],
        [PieceTypes.Lr, PieceTypes.Lr, PieceTypes.Lr, undefined],
    ];
    MAPS$7[PieceRotation.DEG_180] = [
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Lr, undefined, undefined, undefined],
        [PieceTypes.Lr, undefined, undefined, undefined],
        [PieceTypes.Lr, PieceTypes.Lr, undefined, undefined],
    ];
    MAPS$7[PieceRotation.DEG_270] = [
        [undefined, undefined, undefined, undefined],
        [undefined, undefined, undefined, undefined],
        [PieceTypes.Lr, PieceTypes.Lr, PieceTypes.Lr, undefined],
        [PieceTypes.Lr, undefined, undefined, undefined],
    ];
    var Lr = (function (_super) {
        __extends(Lr, _super);
        function Lr(x, y, gridSize) {
            var _this = _super.call(this, x, y, gridSize, MAPS$7) || this;
            _this.color = PieceColors['Lr'];
            return _this;
        }
        return Lr;
    }(Piece));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var PiecesFactory = (function () {
        function PiecesFactory(gridSize) {
            this._available = [];
            this._gridSize = gridSize;
            this._available.push(Dot);
            this._available.push(Box);
            this._available.push(Line);
            this._available.push(T);
            this._available.push(Z);
            this._available.push(S);
            this._available.push(L);
            this._available.push(Lr);
        }
        /**
         * @param {?} x
         * @param {?} y
         * @return {?}
         */
        PiecesFactory.prototype.getRandomPiecePiece = /**
         * @param {?} x
         * @param {?} y
         * @return {?}
         */
            function (x, y) {
                /** @type {?} */
                var idx = Math.floor(Math.random() * (this._available.length));
                return new this._available[idx](x, y, this._gridSize);
                // return new this._available[2](x, y, this._gridSize);
            };
        return PiecesFactory;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var SPAWN_POSITION_X = 4;
    /** @type {?} */
    var SPAWN_POSITION_Y = -4;
    var Tile = (function () {
        function Tile() {
            this.solid = false;
            this.color = null;
        }
        return Tile;
    }());
    var GameManagerService = (function () {
        function GameManagerService() {
            this.settings = {
                tileSize: null
            };
            this._gridSize = { width: 0, height: 0 };
            this._locked = true;
            this._lineCleared = new Subject.Subject();
            this._gameOver = new Subject.Subject();
            this.lineCleared$ = this._lineCleared.asObservable();
            this.gameOver$ = this._gameOver.asObservable();
        }
        Object.defineProperty(GameManagerService.prototype, "elementsInRow", {
            get: /**
             * @return {?}
             */ function () {
                return this._gridSize.width;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} width
         * @param {?} height
         * @param {?} gameSpeed
         * @param {?=} tileSize
         * @return {?}
         */
        GameManagerService.prototype.initialize = /**
         * @param {?} width
         * @param {?} height
         * @param {?} gameSpeed
         * @param {?=} tileSize
         * @return {?}
         */
            function (width, height, gameSpeed, tileSize) {
                this._gridSize.width = width;
                this._gridSize.height = height;
                this._gameSpeed = gameSpeed;
                this._piecesFactory = new PiecesFactory(this._gridSize);
                if (tileSize) {
                    this.settings.tileSize = tileSize;
                }
                this._initializeEmptyBoard();
                this._spawnNewPiece();
                this._drawPiece();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.start = /**
         * @return {?}
         */
            function () {
                var _this = this;
                clearInterval(this._gameInterval);
                this._gameInterval = setInterval(function () {
                    _this._update();
                }, this._gameSpeed);
                this._locked = false;
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.stop = /**
         * @return {?}
         */
            function () {
                this._locked = true;
                clearInterval(this._gameInterval);
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.reset = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var emptyTile = new Tile();
                for (var pos = 0; pos < this.grid.length; pos++) {
                    if (this.grid[pos].color || this.grid[pos].solid) {
                        this.__changeCell(pos, emptyTile);
                    }
                }
                this._spawnNewPiece();
                this._drawPiece();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.moveLeft = /**
         * @return {?}
         */
            function () {
                if (this._locked) {
                    return;
                }
                this._clearPiece();
                this._piece.store();
                this._piece.moveLeft();
                if (this._collidesLeft()) {
                    this._piece.revert();
                }
                this._drawPiece();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.moveRight = /**
         * @return {?}
         */
            function () {
                if (this._locked) {
                    return;
                }
                this._clearPiece();
                this._piece.store();
                this._piece.moveRight();
                if (this._collidesRight()) {
                    this._piece.revert();
                }
                this._drawPiece();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.rotate = /**
         * @return {?}
         */
            function () {
                if (this._locked) {
                    return;
                }
                this._clearPiece();
                this._piece.store();
                this._piece.rotate();
                while (this._collidesRight()) {
                    this._piece.moveLeft();
                    if (this._collidesLeft()) {
                        this._piece.revert();
                        break;
                    }
                }
                this._drawPiece();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.moveDown = /**
         * @return {?}
         */
            function () {
                this._update();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._clearFullLines = /**
         * @return {?}
         */
            function () {
                for (var row = this._gridSize.height - 1; row >= 0; row--) {
                    /** @type {?} */
                    var isFull = true;
                    for (var col = 0; col < this._gridSize.width; col++) {
                        /** @type {?} */
                        var pos = row * this._gridSize.width + col;
                        if (this.grid[pos].solid === false) {
                            isFull = false;
                            break;
                        }
                    }
                    if (isFull) {
                        /** @type {?} */
                        var emptyRow = Array.apply(null, Array(this._gridSize.width))
                            .map(function (idx) { return new Tile(); });
                        /** @type {?} */
                        var topPortion = this.grid.slice(0, row * this._gridSize.width);
                        (_a = this.grid).splice.apply(_a, __spread([0, ++row * this._gridSize.width], emptyRow.concat(topPortion)));
                        this._lineCleared.next();
                    }
                }
                var _a;
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._update = /**
         * @return {?}
         */
            function () {
                if (this._locked) {
                    return;
                }
                this._locked = true;
                this._piece.revert();
                this._clearPiece();
                this._piece.store();
                this._piece.moveDown();
                if (this._collidesBottom()) {
                    this._piece.revert();
                    this._markSolid();
                    this._drawPiece();
                    this._clearFullLines();
                    this._spawnNewPiece();
                    if (this._isGameOver()) {
                        this._onGameOver();
                        return;
                    }
                }
                this._drawPiece();
                this._locked = false;
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._isGameOver = /**
         * @return {?}
         */
            function () {
                this._piece.store();
                this._piece.moveDown();
                if (this._collidesBottom()) {
                    return true;
                }
                this._piece.revert();
                return false;
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._onGameOver = /**
         * @return {?}
         */
            function () {
                this.stop();
                this._gameOver.next();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._spawnNewPiece = /**
         * @return {?}
         */
            function () {
                this._piece = this._piecesFactory.getRandomPiecePiece(SPAWN_POSITION_X, SPAWN_POSITION_Y);
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._initializeEmptyBoard = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var cellsCount = this._gridSize.width * this._gridSize.height;
                this.grid = Array.apply(null, Array(cellsCount))
                    .map(function (idx) { return new Tile(); });
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._clearPiece = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._piece.positionsOnGrid
                    .forEach(function (pos) {
                    _this.__changeCell(pos, { color: undefined });
                });
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._drawPiece = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._piece.clearStore();
                this._piece.positionsOnGrid
                    .forEach(function (pos) {
                    _this.__changeCell(pos, { color: _this._piece.color });
                });
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._markSolid = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._piece.positionsOnGrid.forEach(function (pos) {
                    _this.__changeCell(pos, { solid: true });
                });
            };
        /**
         * @param {?} pos
         * @param {?=} data
         * @return {?}
         */
        GameManagerService.prototype.__changeCell = /**
         * @param {?} pos
         * @param {?=} data
         * @return {?}
         */
            function (pos, data) {
                if (data === void 0) {
                    data = {};
                }
                this.grid[pos] = Object.assign({}, this.grid[pos], data);
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._collidesBottom = /**
         * @return {?}
         */
            function () {
                if (this._piece.bottomRow >= this._gridSize.height) {
                    return true;
                }
                return this.__collides();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._collidesLeft = /**
         * @return {?}
         */
            function () {
                if (this._piece.leftCol < 0) {
                    return true;
                }
                return this.__collides();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype._collidesRight = /**
         * @return {?}
         */
            function () {
                if (this._piece.rightCol >= this._gridSize.width) {
                    return true;
                }
                return this.__collides();
            };
        /**
         * @return {?}
         */
        GameManagerService.prototype.__collides = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return this._piece.positionsOnGrid
                    .some(function (pos) {
                    if (pos > 0 && _this.grid[pos] && _this.grid[pos].solid) {
                        return true;
                    }
                    return false;
                });
            };
        GameManagerService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        GameManagerService.ctorParameters = function () { return []; };
        return GameManagerService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var GAME_SPEED = 500;
    /** @type {?} */
    var MOVE_DOWN_SPEED = 0.2; // fraction of initial game speed
    /** @enum {number} */
    var GameState = {
        Paused: 0,
        Started: 1,
        Over: 2,
    };
    GameState[GameState.Paused] = 'Paused';
    GameState[GameState.Started] = 'Started';
    GameState[GameState.Over] = 'Over';
    var TetrisCoreComponent = (function () {
        function TetrisCoreComponent(_manager) {
            var _this = this;
            this._manager = _manager;
            this.rotate = false;
            this.moveLeft = false;
            this.moveRight = false;
            this.moveDown = false;
            this.start = false;
            this.stop = false;
            this.reset = false;
            this.lineCleared = new core.EventEmitter();
            this.gameOver = new core.EventEmitter();
            this.state = GameState.Paused;
            this.gridWidth = 10;
            this.gridHeight = 20;
            this._manager.lineCleared$.subscribe(function (data) { return _this._onLineCleared(data); });
            this._manager.gameOver$.subscribe(function (data) { return _this._onGameOver(data); });
        }
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.initialSpeed = this.initialSpeed || GAME_SPEED;
                this._moveDownSpeed = this.initialSpeed * MOVE_DOWN_SPEED;
                this._manager.initialize(this.gridWidth, this.gridHeight, this.initialSpeed, this.tileSize);
                this.grid = this._manager.grid;
                setInterval(function () {
                    if (_this.moveDown) {
                        _this._manager.moveDown();
                    }
                }, this._moveDownSpeed);
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        TetrisCoreComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (this._keyPressed(changes.moveLeft)) {
                    this._manager.moveLeft();
                }
                else if (this._keyPressed(changes.moveRight)) {
                    this._manager.moveRight();
                }
                if (this._keyPressed(changes.rotate)) {
                    this._manager.rotate();
                }
                if (this._keyPressed(changes.start)) {
                    this._manager.start();
                }
                if (this._keyPressed(changes.stop)) {
                    this._manager.stop();
                }
                if (this._keyPressed(changes.reset)) {
                    this._manager.reset();
                }
            };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionLeft = /**
         * @return {?}
         */
            function () { this._manager.moveLeft(); };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionRight = /**
         * @return {?}
         */
            function () { this._manager.moveRight(); };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionRotate = /**
         * @return {?}
         */
            function () { this._manager.rotate(); };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionDown = /**
         * @return {?}
         */
            function () { this._manager.moveDown(); };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionReset = /**
         * @return {?}
         */
            function () { this._manager.reset(); };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionStart = /**
         * @return {?}
         */
            function () {
                this._manager.start();
                this.state = GameState.Started;
            };
        /**
         * @return {?}
         */
        TetrisCoreComponent.prototype.actionStop = /**
         * @return {?}
         */
            function () {
                this._manager.stop();
                this.state = GameState.Paused;
            };
        /**
         * @param {?} key
         * @return {?}
         */
        TetrisCoreComponent.prototype._keyPressed = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return key && key.currentValue && !key.previousValue;
            };
        /**
         * @param {?} data
         * @return {?}
         */
        TetrisCoreComponent.prototype._onLineCleared = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this.lineCleared.emit(data);
            };
        /**
         * @param {?} data
         * @return {?}
         */
        TetrisCoreComponent.prototype._onGameOver = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this.state = GameState.Over;
                this.gameOver.emit();
            };
        TetrisCoreComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'tetris-core',
                        template: "<board\n    [grid]=\"grid\"></board>\n"
                    }] }
        ];
        /** @nocollapse */
        TetrisCoreComponent.ctorParameters = function () {
            return [
                { type: GameManagerService }
            ];
        };
        TetrisCoreComponent.propDecorators = {
            tileSize: [{ type: core.Input }],
            initialSpeed: [{ type: core.Input }],
            rotate: [{ type: core.Input }],
            moveLeft: [{ type: core.Input }],
            moveRight: [{ type: core.Input }],
            moveDown: [{ type: core.Input }],
            start: [{ type: core.Input }],
            stop: [{ type: core.Input }],
            reset: [{ type: core.Input }],
            lineCleared: [{ type: core.Output }],
            gameOver: [{ type: core.Output }]
        };
        return TetrisCoreComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var TileComponent = (function () {
        function TileComponent(el, _renderer, _manager) {
            this.el = el;
            this._renderer = _renderer;
            this._manager = _manager;
            this.tileSize = null;
            if (this._manager.settings.tileSize) {
                this.tileSize = this._manager.settings.tileSize;
            }
        }
        /**
         * @return {?}
         */
        TileComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.data.color) {
                    this._renderer.addClass(this.el.nativeElement, this.data.color);
                }
            };
        TileComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'tile',
                        template: "",
                        encapsulation: core.ViewEncapsulation.None,
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        // tslint:disable-next-line
                        host: {
                            '[style.width]': 'tileSize',
                            '[style.height]': 'tileSize'
                        },
                        styles: ["tile{display:block;background:rgba(176,230,225,.35);width:25px;height:25px;float:left;border:1px solid #4e4645;margin:1px}tile.color-box{background:#fca}tile.color-dot{background:#ff77a8}tile.color-line{background:#83769c}tile.color-t{background:#29adff}tile.color-l{background:#00e436}tile.color-lr{background:#ffec27}tile.color-z{background:#ffa300}tile.color-s{background:#c2c3c7}"]
                    }] }
        ];
        /** @nocollapse */
        TileComponent.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: core.Renderer2 },
                { type: GameManagerService }
            ];
        };
        TileComponent.propDecorators = {
            data: [{ type: core.Input }]
        };
        return TileComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BoardComponent = (function () {
        function BoardComponent(_manager) {
            this._manager = _manager;
            this.boardWidth = null;
        }
        /**
         * @return {?}
         */
        BoardComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                if (this._manager.settings.tileSize) {
                    /** @type {?} */
                    var bb = this.tile.el.nativeElement.getBoundingClientRect();
                    /** @type {?} */
                    var TILE_MARGIN = 1;
                    /** @type {?} */
                    var oneTileSpace = bb.width + 2 * TILE_MARGIN;
                    this.boardWidth = oneTileSpace * this._manager.elementsInRow;
                }
            };
        BoardComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'board',
                        template: "<tile *ngFor=\"let tileData of grid\"\n    [data]=\"tileData\">\n</tile>\n",
                        host: {
                            '[style.width]': 'boardWidth + "px"',
                        },
                        styles: [":host{width:290px;display:block}"]
                    }] }
        ];
        /** @nocollapse */
        BoardComponent.ctorParameters = function () {
            return [
                { type: GameManagerService }
            ];
        };
        BoardComponent.propDecorators = {
            grid: [{ type: core.Input }],
            tile: [{ type: core.ViewChild, args: [TileComponent,] }]
        };
        return BoardComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var TetrisCoreModule = (function () {
        function TetrisCoreModule() {
        }
        /**
         * @return {?}
         */
        TetrisCoreModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: TetrisCoreModule
                };
            };
        TetrisCoreModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule
                        ],
                        declarations: [
                            TetrisCoreComponent,
                            BoardComponent,
                            TileComponent
                        ],
                        providers: [
                            GameManagerService
                        ],
                        exports: [TetrisCoreComponent]
                    },] }
        ];
        return TetrisCoreModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.TetrisCoreModule = TetrisCoreModule;
    exports.GameState = GameState;
    exports.TetrisCoreComponent = TetrisCoreComponent;
    exports.ɵb = BoardComponent;
    exports.ɵa = GameManagerService;
    exports.ɵc = TileComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRldHJpcy51bWQuanMubWFwIiwic291cmNlcyI6WyJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvUGllY2UudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9Eb3QudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9Cb3gudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9MaW5lLnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvVC50cyIsIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL1oudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9TLnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvTC50cyIsIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL0xyLnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvUGllY2VzRmFjdG9yeS50cyIsIm5nOi8vbmd4LXRldHJpcy9zZXJ2aWNlcy9nYW1lLW1hbmFnZXIuc2VydmljZS50cyIsIm5nOi8vbmd4LXRldHJpcy90ZXRyaXMtY29yZS5jb21wb25lbnQudHMiLCJuZzovL25neC10ZXRyaXMvdGlsZS90aWxlLmNvbXBvbmVudC50cyIsIm5nOi8vbmd4LXRldHJpcy9ib2FyZC9ib2FyZC5jb21wb25lbnQudHMiLCJuZzovL25neC10ZXRyaXMvcHVibGljX2FwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImV4cG9ydCBlbnVtIFBpZWNlUm90YXRpb24ge1xuICAgIERFR18wID0gMCxcbiAgICBERUdfOTAgPSAxLFxuICAgIERFR18xODAgPSAyLFxuICAgIERFR18yNzAgPSAzXG59XG5cblxuZXhwb3J0IGVudW0gUGllY2VUeXBlcyB7XG4gICAgRG90ID0gMSxcbiAgICBCb3ggPSAyLFxuICAgIExpbmUgPSAzLFxuICAgIFQgPSA0LFxuICAgIEwgPSA1LFxuICAgIExyID0gNixcbiAgICBaID0gNyxcbiAgICBTID0gOFxufVxuXG4vLyBwaWNrZWQgZnJvbSBodHRwczovL3d3dy5yb21hbnpvbG90YXJldi5jb20vcGljby04LWNvbG9yLXBhbGV0dGUvXG5leHBvcnQgZW51bSBQaWVjZUNvbG9ycyB7XG4gICAgQm94ID0gJ2NvbG9yLWJveCcsXG4gICAgRG90ID0gJ2NvbG9yLWRvdCcsXG4gICAgTGluZSA9ICdjb2xvci1saW5lJyxcbiAgICBUID0gJ2NvbG9yLXQnLFxuICAgIEwgPSAnY29sb3ItbCcsXG4gICAgTHIgPSAnY29sb3ItbHInLFxuICAgIFogPSAnY29sb3IteicsXG4gICAgUyA9ICdjb2xvci1zJ1xufVxuXG5leHBvcnQgY2xhc3MgUGllY2Uge1xuICAgIGNvbG9yID0gJ3JlZCc7XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcbiAgICByb3RhdGlvbjogUGllY2VSb3RhdGlvbiA9IFBpZWNlUm90YXRpb24uREVHXzA7XG5cbiAgICBwcml2YXRlIF9tYXBzOiB7fTtcbiAgICBwdWJsaWMgbWFwOiBBcnJheTxBcnJheTxudW1iZXI+PiA9IFtcbiAgICAgICAgW10sIFtdXG4gICAgXTtcblxuICAgIHByaXZhdGUgX2dyaWRTaXplO1xuICAgIHByaXZhdGUgX2xhc3RDb25maWc6IGFueSA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSwgbWFwcykge1xuICAgICAgICB0aGlzLl9ncmlkU2l6ZSA9IGdyaWRTaXplO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLl9tYXBzID0gbWFwcztcblxuICAgICAgICB0aGlzLm1hcCA9IHRoaXMuX21hcHNbdGhpcy5yb3RhdGlvbl07XG4gICAgfVxuXG4gICAgZ2V0IHBvc2l0aW9uc09uR3JpZCgpIHtcbiAgICAgICAgY29uc3QgYWNjID0gW107XG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcFtyb3ddW2NvbF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gKHRoaXMueSArIHJvdykgKiB0aGlzLl9ncmlkU2l6ZS53aWR0aCArIHRoaXMueCArIGNvbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjYy5wdXNoKHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdG9yZSgpIHtcbiAgICAgICAgdGhpcy5fbGFzdENvbmZpZyA9IHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLnJvdGF0aW9uLFxuICAgICAgICAgICAgbWFwOiB0aGlzLm1hcFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBjbGVhclN0b3JlKCkge1xuICAgICAgICB0aGlzLl9sYXN0Q29uZmlnID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmV2ZXJ0KCkge1xuICAgICAgICBpZiAodGhpcy5fbGFzdENvbmZpZykge1xuICAgICAgICAgICAgZm9yIChjb25zdCB4IGluIHRoaXMuX2xhc3RDb25maWcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbGFzdENvbmZpZy5oYXNPd25Qcm9wZXJ0eSh4KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW3hdID0gdGhpcy5fbGFzdENvbmZpZ1t4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2xhc3RDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHJvdGF0ZSgpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX21hcHMpO1xuICAgICAgICBsZXQgaWR4ID0ga2V5cy5pbmRleE9mKHRoaXMucm90YXRpb24udG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChpZHggPj0ga2V5cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0ga2V5c1swXSBhcyBhbnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0ga2V5c1srK2lkeF0gYXMgYW55O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYXAgPSB0aGlzLl9tYXBzW3RoaXMucm90YXRpb25dO1xuICAgIH1cblxuICAgIHB1YmxpYyBtb3ZlRG93bigpIHtcbiAgICAgICAgdGhpcy55Kys7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVSaWdodCgpIHtcbiAgICAgICAgdGhpcy54Kys7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVMZWZ0KCkge1xuICAgICAgICB0aGlzLngtLTtcbiAgICB9XG5cbiAgICBnZXQgYm90dG9tUm93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy55ICsgMztcbiAgICB9XG5cbiAgICBnZXQgcmlnaHRDb2woKSB7XG4gICAgICAgIGxldCBjb2wgPSAzO1xuICAgICAgICB3aGlsZSAoY29sID49IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8PSAzOyByb3crKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcFtyb3ddW2NvbF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueCArIGNvbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2wtLTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgZ2V0IGxlZnRDb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5jb25zdCBNQVBTID0gW107XG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWQsICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWQsICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkJveCwgICB1bmRlZmluZWQsICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbl07XG5cbmV4cG9ydCBjbGFzcyBEb3QgZXh0ZW5kcyBQaWVjZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgZ3JpZFNpemUpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgZ3JpZFNpemUsIE1BUFMpO1xuICAgICAgICB0aGlzLmNvbG9yID0gUGllY2VDb2xvcnNbJ0RvdCddO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UGllY2UsIFBpZWNlQ29sb3JzLCBQaWVjZVJvdGF0aW9uLCBQaWVjZVR5cGVzfSBmcm9tICcuL1BpZWNlJztcblxuY29uc3QgTUFQUyA9IFtdO1xuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5Cb3gsICAgUGllY2VUeXBlcy5Cb3gsICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5Cb3gsICAgUGllY2VUeXBlcy5Cb3gsICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbl07XG5cblxuZXhwb3J0IGNsYXNzIEJveCBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snQm94J107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5jb25zdCBNQVBTID0gW107XG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICAgICB1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgICAgICB1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxpbmUsICAgUGllY2VUeXBlcy5MaW5lLCAgIFBpZWNlVHlwZXMuTGluZSwgIFBpZWNlVHlwZXMuTGluZV0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzkwXSA9IFtcbiAgICBbUGllY2VUeXBlcy5MaW5lLCAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWQsICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxpbmUsICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZCwgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTGluZSwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkLCAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MaW5lLCAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWQsICB1bmRlZmluZWRdLFxuXTtcblxuXG5leHBvcnQgY2xhc3MgTGluZSBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snTGluZSddO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UGllY2UsIFBpZWNlQ29sb3JzLCBQaWVjZVJvdGF0aW9uLCBQaWVjZVR5cGVzfSBmcm9tICcuL1BpZWNlJztcblxuXG5jb25zdCBNQVBTID0ge307XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuVCwgICBQaWVjZVR5cGVzLlQsICAgUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzkwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIFBpZWNlVHlwZXMuVCwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMTgwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuVCwgICBQaWVjZVR5cGVzLlQsICAgUGllY2VUeXBlcy5ULCAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuVCwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18yNzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIFBpZWNlVHlwZXMuVCwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5leHBvcnQgY2xhc3MgVCBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snVCddO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UGllY2UsIFBpZWNlQ29sb3JzLCBQaWVjZVJvdGF0aW9uLCBQaWVjZVR5cGVzfSBmcm9tICcuL1BpZWNlJztcblxuXG5jb25zdCBNQVBTID0ge307XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLlosICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuWiwgICBQaWVjZVR5cGVzLlosICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuWiwgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzkwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuWiwgICBQaWVjZVR5cGVzLlosICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuWiwgICBQaWVjZVR5cGVzLlosICB1bmRlZmluZWRdLFxuXTtcblxuZXhwb3J0IGNsYXNzIFogZXh0ZW5kcyBQaWVjZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgZ3JpZFNpemUpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgZ3JpZFNpemUsIE1BUFMpO1xuICAgICAgICB0aGlzLmNvbG9yID0gUGllY2VDb2xvcnNbJ1onXTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7UGllY2UsIFBpZWNlQ29sb3JzLCBQaWVjZVJvdGF0aW9uLCBQaWVjZVR5cGVzfSBmcm9tICcuL1BpZWNlJztcblxuXG5jb25zdCBNQVBTID0ge307XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5TLCAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlMsICBQaWVjZVR5cGVzLlMsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgIFBpZWNlVHlwZXMuUywgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgUGllY2VUeXBlcy5TLCAgIFBpZWNlVHlwZXMuUywgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlMsICBQaWVjZVR5cGVzLlMsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5leHBvcnQgY2xhc3MgUyBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snUyddO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UGllY2UsIFBpZWNlQ29sb3JzLCBQaWVjZVJvdGF0aW9uLCBQaWVjZVR5cGVzfSBmcm9tICcuL1BpZWNlJztcblxuXG5jb25zdCBNQVBTID0ge307XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzkwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICAgUGllY2VUeXBlcy5MLCAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18xODBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuTCwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MLCAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzI3MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuTCwgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICAgUGllY2VUeXBlcy5MLCAgdW5kZWZpbmVkXSxcbl07XG5cbmV4cG9ydCBjbGFzcyBMIGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydMJ107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5cbmNvbnN0IE1BUFMgPSB7fTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MciwgIFBpZWNlVHlwZXMuTHIsICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuTHIsICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuTHIsICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICB1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MciwgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxyLCAgIFBpZWNlVHlwZXMuTHIsICBQaWVjZVR5cGVzLkxyLCAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzE4MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MciwgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxyLCAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTHIsICBQaWVjZVR5cGVzLkxyLCAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMjcwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTHIsICBQaWVjZVR5cGVzLkxyLCAgUGllY2VUeXBlcy5MciwgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MciwgIHVuZGVmaW5lZCAsICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuXTtcblxuZXhwb3J0IGNsYXNzIExyIGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydMciddO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RG90fSBmcm9tICcuL0RvdCc7XG5pbXBvcnQge0JveH0gZnJvbSAnLi9Cb3gnO1xuaW1wb3J0IHtMaW5lfSBmcm9tICcuL0xpbmUnO1xuaW1wb3J0IHtUfSBmcm9tICcuL1QnO1xuaW1wb3J0IHtafSBmcm9tICcuL1onO1xuaW1wb3J0IHtTfSBmcm9tICcuL1MnO1xuaW1wb3J0IHtMfSBmcm9tICcuL0wnO1xuaW1wb3J0IHtMcn0gZnJvbSAnLi9Mcic7XG5cbmV4cG9ydCBjbGFzcyBQaWVjZXNGYWN0b3J5IHtcbiAgICBwcml2YXRlIF9hdmFpbGFibGUgPSBbXTtcbiAgICBwcml2YXRlIF9ncmlkU2l6ZTtcblxuICAgIGNvbnN0cnVjdG9yKGdyaWRTaXplKSB7XG4gICAgICAgIHRoaXMuX2dyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goRG90KTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goQm94KTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goTGluZSk7XG4gICAgICAgIHRoaXMuX2F2YWlsYWJsZS5wdXNoKFQpO1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChaKTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goUyk7XG4gICAgICAgIHRoaXMuX2F2YWlsYWJsZS5wdXNoKEwpO1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChMcik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJhbmRvbVBpZWNlUGllY2UoeCwgeSkge1xuICAgICAgICBjb25zdCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5fYXZhaWxhYmxlLmxlbmd0aCkpO1xuXG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5fYXZhaWxhYmxlW2lkeF0oeCwgeSwgdGhpcy5fZ3JpZFNpemUpO1xuICAgICAgICAvLyByZXR1cm4gbmV3IHRoaXMuX2F2YWlsYWJsZVsyXSh4LCB5LCB0aGlzLl9ncmlkU2l6ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7UGllY2V9IGZyb20gJy4uL2NsYXNzZXMvUGllY2UnO1xuaW1wb3J0IHtQaWVjZXNGYWN0b3J5fSBmcm9tICcuLi9jbGFzc2VzL1BpZWNlc0ZhY3RvcnknO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzL2ludGVybmFsL09ic2VydmFibGUnO1xuaW1wb3J0IHtTdWJqZWN0fSBmcm9tICdyeGpzL2ludGVybmFsL1N1YmplY3QnO1xuXG5jb25zdCBTUEFXTl9QT1NJVElPTl9YID0gNDtcbmNvbnN0IFNQQVdOX1BPU0lUSU9OX1kgPSAtNDtcblxuZXhwb3J0IGNsYXNzIFRpbGUge1xuICAgIHNvbGlkID0gZmFsc2U7XG4gICAgY29sb3IgPSBudWxsO1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgR2FtZU1hbmFnZXJTZXJ2aWNlIHtcbiAgICBwdWJsaWMgc2V0dGluZ3MgPSB7XG4gICAgICAgIHRpbGVTaXplOiBudWxsXG4gICAgfTtcblxuICAgIHB1YmxpYyBnZXQgZWxlbWVudHNJblJvdygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyaWRTaXplLndpZHRoO1xuICAgIH1cblxuICAgIC8vIHNlcmlhbGl6ZWQgZ3JpZCA6KVxuICAgIHB1YmxpYyBncmlkOiBBcnJheTxUaWxlPjtcblxuICAgIHB1YmxpYyBsaW5lQ2xlYXJlZCQ6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZ2FtZU92ZXIkOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgICBwcml2YXRlIF9ncmlkU2l6ZToge1xuICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICBoZWlnaHQ6IG51bWJlclxuICAgIH0gPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcblxuICAgIHByaXZhdGUgX3BpZWNlOiBQaWVjZTtcbiAgICBwcml2YXRlIF9waWVjZXNGYWN0b3J5OiBQaWVjZXNGYWN0b3J5O1xuXG4gICAgcHJpdmF0ZSBfbG9ja2VkID0gdHJ1ZTtcbiAgICBwcml2YXRlIF9nYW1lU3BlZWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9nYW1lSW50ZXJ2YWw7XG5cbiAgICBwcml2YXRlIF9saW5lQ2xlYXJlZCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgICBwcml2YXRlIF9nYW1lT3ZlciA9IG5ldyBTdWJqZWN0PGFueT4oKTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxpbmVDbGVhcmVkJCA9IHRoaXMuX2xpbmVDbGVhcmVkLmFzT2JzZXJ2YWJsZSgpO1xuICAgICAgICB0aGlzLmdhbWVPdmVyJCA9IHRoaXMuX2dhbWVPdmVyLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbml0aWFsaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBnYW1lU3BlZWQsIHRpbGVTaXplPzogYW55KSB7XG4gICAgICAgIHRoaXMuX2dyaWRTaXplLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2dyaWRTaXplLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fZ2FtZVNwZWVkID0gZ2FtZVNwZWVkO1xuICAgICAgICB0aGlzLl9waWVjZXNGYWN0b3J5ID0gbmV3IFBpZWNlc0ZhY3RvcnkodGhpcy5fZ3JpZFNpemUpO1xuXG4gICAgICAgIGlmICh0aWxlU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50aWxlU2l6ZSA9IHRpbGVTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUVtcHR5Qm9hcmQoKTtcblxuICAgICAgICB0aGlzLl9zcGF3bk5ld1BpZWNlKCk7XG4gICAgICAgIHRoaXMuX2RyYXdQaWVjZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGFydCgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9nYW1lSW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLl9nYW1lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgfSwgdGhpcy5fZ2FtZVNwZWVkKTtcbiAgICAgICAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuX2xvY2tlZCA9IHRydWU7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZ2FtZUludGVydmFsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKSB7XG4gICAgICAgIGNvbnN0IGVtcHR5VGlsZSA9IG5ldyBUaWxlKCk7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDA7IHBvcyA8IHRoaXMuZ3JpZC5sZW5ndGg7IHBvcysrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkW3Bvc10uY29sb3IgfHwgdGhpcy5ncmlkW3Bvc10uc29saWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fY2hhbmdlQ2VsbChwb3MsIGVtcHR5VGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zcGF3bk5ld1BpZWNlKCk7XG4gICAgICAgIHRoaXMuX2RyYXdQaWVjZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBtb3ZlTGVmdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NsZWFyUGllY2UoKTtcbiAgICAgICAgdGhpcy5fcGllY2Uuc3RvcmUoKTtcblxuICAgICAgICB0aGlzLl9waWVjZS5tb3ZlTGVmdCgpO1xuICAgICAgICBpZiAodGhpcy5fY29sbGlkZXNMZWZ0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3BpZWNlLnJldmVydCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVSaWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NsZWFyUGllY2UoKTtcbiAgICAgICAgdGhpcy5fcGllY2Uuc3RvcmUoKTtcblxuICAgICAgICB0aGlzLl9waWVjZS5tb3ZlUmlnaHQoKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbGxpZGVzUmlnaHQoKSkge1xuICAgICAgICAgICAgdGhpcy5fcGllY2UucmV2ZXJ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kcmF3UGllY2UoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcm90YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fbG9ja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jbGVhclBpZWNlKCk7XG4gICAgICAgIHRoaXMuX3BpZWNlLnN0b3JlKCk7XG5cbiAgICAgICAgdGhpcy5fcGllY2Uucm90YXRlKCk7XG4gICAgICAgIHdoaWxlICh0aGlzLl9jb2xsaWRlc1JpZ2h0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3BpZWNlLm1vdmVMZWZ0KCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9jb2xsaWRlc0xlZnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BpZWNlLnJldmVydCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVEb3duKCkge1xuICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jbGVhckZ1bGxMaW5lcygpIHtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gdGhpcy5fZ3JpZFNpemUuaGVpZ2h0IC0gMTsgcm93ID49IDA7IHJvdy0tKSB7XG4gICAgICAgICAgICBsZXQgaXNGdWxsID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IHRoaXMuX2dyaWRTaXplLndpZHRoOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IHJvdyAqIHRoaXMuX2dyaWRTaXplLndpZHRoICsgY29sO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyaWRbcG9zXS5zb2xpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNGdWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzRnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVtcHR5Um93ID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkodGhpcy5fZ3JpZFNpemUud2lkdGgpKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChpZHgpID0+IG5ldyBUaWxlKCkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wUG9ydGlvbiA9IHRoaXMuZ3JpZC5zbGljZSgwLCByb3cgKiB0aGlzLl9ncmlkU2l6ZS53aWR0aCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQuc3BsaWNlKDAsICsrcm93ICogdGhpcy5fZ3JpZFNpemUud2lkdGgsIC4uLmVtcHR5Um93LmNvbmNhdCh0b3BQb3J0aW9uKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZUNsZWFyZWQubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fbG9ja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGllY2UucmV2ZXJ0KCk7XG5cbiAgICAgICAgdGhpcy5fY2xlYXJQaWVjZSgpO1xuICAgICAgICB0aGlzLl9waWVjZS5zdG9yZSgpO1xuXG4gICAgICAgIHRoaXMuX3BpZWNlLm1vdmVEb3duKCk7XG4gICAgICAgIGlmICh0aGlzLl9jb2xsaWRlc0JvdHRvbSgpKSB7XG4gICAgICAgICAgICB0aGlzLl9waWVjZS5yZXZlcnQoKTtcbiAgICAgICAgICAgIHRoaXMuX21hcmtTb2xpZCgpO1xuICAgICAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX2NsZWFyRnVsbExpbmVzKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3NwYXduTmV3UGllY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkdhbWVPdmVyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG4gICAgICAgIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2lzR2FtZU92ZXIoKSB7XG4gICAgICAgIHRoaXMuX3BpZWNlLnN0b3JlKCk7XG4gICAgICAgIHRoaXMuX3BpZWNlLm1vdmVEb3duKCk7XG4gICAgICAgIGlmICh0aGlzLl9jb2xsaWRlc0JvdHRvbSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BpZWNlLnJldmVydCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25HYW1lT3ZlcigpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHRoaXMuX2dhbWVPdmVyLm5leHQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zcGF3bk5ld1BpZWNlKCkge1xuICAgICAgICB0aGlzLl9waWVjZSA9IHRoaXMuX3BpZWNlc0ZhY3RvcnkuZ2V0UmFuZG9tUGllY2VQaWVjZShTUEFXTl9QT1NJVElPTl9YLCBTUEFXTl9QT1NJVElPTl9ZKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pbml0aWFsaXplRW1wdHlCb2FyZCgpIHtcbiAgICAgICAgY29uc3QgY2VsbHNDb3VudCA9IHRoaXMuX2dyaWRTaXplLndpZHRoICogdGhpcy5fZ3JpZFNpemUuaGVpZ2h0O1xuICAgICAgICB0aGlzLmdyaWQgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShjZWxsc0NvdW50KSlcbiAgICAgICAgICAgIC5tYXAoKGlkeCkgPT4gbmV3IFRpbGUoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY2xlYXJQaWVjZSgpIHtcbiAgICAgICAgdGhpcy5fcGllY2UucG9zaXRpb25zT25HcmlkXG4gICAgICAgICAgICAuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2NoYW5nZUNlbGwocG9zLCB7Y29sb3I6IHVuZGVmaW5lZH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZHJhd1BpZWNlKCkge1xuICAgICAgICB0aGlzLl9waWVjZS5jbGVhclN0b3JlKCk7XG4gICAgICAgIHRoaXMuX3BpZWNlLnBvc2l0aW9uc09uR3JpZFxuICAgICAgICAgICAgLmZvckVhY2goKHBvcykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX19jaGFuZ2VDZWxsKHBvcywge2NvbG9yOiB0aGlzLl9waWVjZS5jb2xvcn0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFya1NvbGlkKCkge1xuICAgICAgICB0aGlzLl9waWVjZS5wb3NpdGlvbnNPbkdyaWQuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9fY2hhbmdlQ2VsbChwb3MsIHtzb2xpZDogdHJ1ZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fY2hhbmdlQ2VsbChwb3MsIGRhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLmdyaWRbcG9zXSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ3JpZFtwb3NdLCBkYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jb2xsaWRlc0JvdHRvbSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BpZWNlLmJvdHRvbVJvdyA+PSB0aGlzLl9ncmlkU2l6ZS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9fY29sbGlkZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jb2xsaWRlc0xlZnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9waWVjZS5sZWZ0Q29sIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fX2NvbGxpZGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29sbGlkZXNSaWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BpZWNlLnJpZ2h0Q29sID49IHRoaXMuX2dyaWRTaXplLndpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9fY29sbGlkZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fY29sbGlkZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9waWVjZS5wb3NpdGlvbnNPbkdyaWRcbiAgICAgICAgICAgIC5zb21lKChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocG9zID4gMCAmJiB0aGlzLmdyaWRbcG9zXSAmJiB0aGlzLmdyaWRbcG9zXS5zb2xpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtHYW1lTWFuYWdlclNlcnZpY2UsIFRpbGV9IGZyb20gJy4vc2VydmljZXMvZ2FtZS1tYW5hZ2VyLnNlcnZpY2UnO1xuXG5jb25zdCBHQU1FX1NQRUVEID0gNTAwO1xuY29uc3QgTU9WRV9ET1dOX1NQRUVEID0gMC4yOyAvLyBmcmFjdGlvbiBvZiBpbml0aWFsIGdhbWUgc3BlZWRcblxuZXhwb3J0IGVudW0gR2FtZVN0YXRlIHtcbiAgICBQYXVzZWQgPSAwLFxuICAgIFN0YXJ0ZWQgPSAxLFxuICAgIE92ZXIgPSAyXG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndGV0cmlzLWNvcmUnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90ZXRyaXMtY29yZS5jb21wb25lbnQuaHRtbCcsXG4gICAgLy8gc3R5bGVVcmxzOiBbJy4vdGV0cmlzLWNvcmUuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIFRldHJpc0NvcmVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gICAgQElucHV0KCkgdGlsZVNpemU6IGFueTtcblxuICAgIEBJbnB1dCgpIGluaXRpYWxTcGVlZDogbnVtYmVyO1xuICAgIEBJbnB1dCgpIHJvdGF0ZSA9IGZhbHNlO1xuICAgIEBJbnB1dCgpIG1vdmVMZWZ0ID0gZmFsc2U7XG4gICAgQElucHV0KCkgbW92ZVJpZ2h0ID0gZmFsc2U7XG4gICAgQElucHV0KCkgbW92ZURvd24gPSBmYWxzZTtcbiAgICBASW5wdXQoKSBzdGFydCA9IGZhbHNlO1xuICAgIEBJbnB1dCgpIHN0b3AgPSBmYWxzZTtcbiAgICBASW5wdXQoKSByZXNldCA9IGZhbHNlO1xuXG4gICAgQE91dHB1dCgpIGxpbmVDbGVhcmVkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICBAT3V0cHV0KCkgZ2FtZU92ZXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgcHVibGljIGdyaWQ6IEFycmF5PFRpbGU+O1xuICAgIHB1YmxpYyBzdGF0ZTogR2FtZVN0YXRlID0gR2FtZVN0YXRlLlBhdXNlZDtcblxuICAgIGdyaWRXaWR0aCA9IDEwO1xuICAgIGdyaWRIZWlnaHQgPSAyMDtcblxuICAgIHByaXZhdGUgX21vdmVEb3duU3BlZWQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9tYW5hZ2VyOiBHYW1lTWFuYWdlclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5fbWFuYWdlci5saW5lQ2xlYXJlZCQuc3Vic2NyaWJlKChkYXRhKSA9PiB0aGlzLl9vbkxpbmVDbGVhcmVkKGRhdGEpKTtcbiAgICAgICAgdGhpcy5fbWFuYWdlci5nYW1lT3ZlciQuc3Vic2NyaWJlKChkYXRhKSA9PiB0aGlzLl9vbkdhbWVPdmVyKGRhdGEpKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgIHRoaXMuaW5pdGlhbFNwZWVkID0gdGhpcy5pbml0aWFsU3BlZWQgfHwgR0FNRV9TUEVFRDtcbiAgICAgIHRoaXMuX21vdmVEb3duU3BlZWQgPSB0aGlzLmluaXRpYWxTcGVlZCAqIE1PVkVfRE9XTl9TUEVFRDtcblxuICAgICAgdGhpcy5fbWFuYWdlci5pbml0aWFsaXplKHRoaXMuZ3JpZFdpZHRoLCB0aGlzLmdyaWRIZWlnaHQsIHRoaXMuaW5pdGlhbFNwZWVkLCB0aGlzLnRpbGVTaXplKTtcbiAgICAgIHRoaXMuZ3JpZCA9IHRoaXMuX21hbmFnZXIuZ3JpZDtcblxuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5tb3ZlRG93bikge1xuICAgICAgICAgIHRoaXMuX21hbmFnZXIubW92ZURvd24oKTtcbiAgICAgICAgfVxuXG4gICAgICB9LCB0aGlzLl9tb3ZlRG93blNwZWVkKTtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmICh0aGlzLl9rZXlQcmVzc2VkKGNoYW5nZXMubW92ZUxlZnQpKSB7XG4gICAgICAgICAgICB0aGlzLl9tYW5hZ2VyLm1vdmVMZWZ0KCk7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9rZXlQcmVzc2VkKGNoYW5nZXMubW92ZVJpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy5fbWFuYWdlci5tb3ZlUmlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9rZXlQcmVzc2VkKGNoYW5nZXMucm90YXRlKSkgeyB0aGlzLl9tYW5hZ2VyLnJvdGF0ZSgpOyB9XG4gICAgICAgIGlmICh0aGlzLl9rZXlQcmVzc2VkKGNoYW5nZXMuc3RhcnQpKSAgeyB0aGlzLl9tYW5hZ2VyLnN0YXJ0KCk7IH1cbiAgICAgICAgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5zdG9wKSkgIHsgdGhpcy5fbWFuYWdlci5zdG9wKCk7IH1cbiAgICAgICAgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5yZXNldCkpICB7IHRoaXMuX21hbmFnZXIucmVzZXQoKTsgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhY3Rpb25MZWZ0KCkgeyB0aGlzLl9tYW5hZ2VyLm1vdmVMZWZ0KCk7IH1cbiAgICBwdWJsaWMgYWN0aW9uUmlnaHQoKSB7IHRoaXMuX21hbmFnZXIubW92ZVJpZ2h0KCk7IH1cbiAgICBwdWJsaWMgYWN0aW9uUm90YXRlKCkgeyB0aGlzLl9tYW5hZ2VyLnJvdGF0ZSgpOyB9XG4gICAgcHVibGljIGFjdGlvbkRvd24oKSB7IHRoaXMuX21hbmFnZXIubW92ZURvd24oKTsgfVxuICAgIHB1YmxpYyBhY3Rpb25SZXNldCgpIHsgdGhpcy5fbWFuYWdlci5yZXNldCgpOyB9XG5cbiAgICBwdWJsaWMgYWN0aW9uU3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX21hbmFnZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5TdGFydGVkO1xuICAgIH1cbiAgICBwdWJsaWMgYWN0aW9uU3RvcCgpIHtcbiAgICAgICAgdGhpcy5fbWFuYWdlci5zdG9wKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBHYW1lU3RhdGUuUGF1c2VkO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2tleVByZXNzZWQoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgJiYga2V5LmN1cnJlbnRWYWx1ZSAmJiAha2V5LnByZXZpb3VzVmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25MaW5lQ2xlYXJlZChkYXRhKSB7XG4gICAgICAgIHRoaXMubGluZUNsZWFyZWQuZW1pdChkYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vbkdhbWVPdmVyKGRhdGEpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5PdmVyO1xuICAgICAgICB0aGlzLmdhbWVPdmVyLmVtaXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICAgIENvbXBvbmVudCxcbiAgICBFbGVtZW50UmVmLFxuICAgIElucHV0LFxuICAgIE9uSW5pdCxcbiAgICBSZW5kZXJlcjIsXG4gICAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0dhbWVNYW5hZ2VyU2VydmljZSwgVGlsZX0gZnJvbSAnLi4vc2VydmljZXMvZ2FtZS1tYW5hZ2VyLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3RpbGUnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90aWxlLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi90aWxlLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBob3N0OiB7XG4gICAgICAgICdbc3R5bGUud2lkdGhdJzogJ3RpbGVTaXplJyxcbiAgICAgICAgJ1tzdHlsZS5oZWlnaHRdJzogJ3RpbGVTaXplJ1xuICAgIH1cbn0pXG5leHBvcnQgY2xhc3MgVGlsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgQElucHV0KCkgZGF0YTogVGlsZTtcbiAgICBwdWJsaWMgdGlsZVNpemUgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcbiAgICAgICAgcHJpdmF0ZSBfcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICAgICAgcHJpdmF0ZSBfbWFuYWdlcjogR2FtZU1hbmFnZXJTZXJ2aWNlXG4gICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9tYW5hZ2VyLnNldHRpbmdzLnRpbGVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVTaXplID0gdGhpcy5fbWFuYWdlci5zZXR0aW5ncy50aWxlU2l6ZVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5jb2xvcikge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzLmRhdGEuY29sb3IpO1xuICAgICAgICB9XG5cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7R2FtZU1hbmFnZXJTZXJ2aWNlLCBUaWxlfSBmcm9tICcuLi9zZXJ2aWNlcy9nYW1lLW1hbmFnZXIuc2VydmljZSc7XG5pbXBvcnQge1RpbGVDb21wb25lbnR9IGZyb20gXCIuLi90aWxlL3RpbGUuY29tcG9uZW50XCI7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYm9hcmQnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9ib2FyZC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vYm9hcmQuY29tcG9uZW50LmNzcyddLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1tzdHlsZS53aWR0aF0nOiAnYm9hcmRXaWR0aCArIFwicHhcIicsXG4gICAgfVxufSlcbmV4cG9ydCBjbGFzcyBCb2FyZENvbXBvbmVudCB7XG4gICAgQElucHV0KCkgZ3JpZDogQXJyYXk8VGlsZT47XG4gICAgQFZpZXdDaGlsZChUaWxlQ29tcG9uZW50KSB0aWxlO1xuICAgIHB1YmxpYyBib2FyZFdpZHRoID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hbmFnZXI6IEdhbWVNYW5hZ2VyU2VydmljZSkge1xuXG4gICAgfVxuXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5fbWFuYWdlci5zZXR0aW5ncy50aWxlU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgYmIgPSB0aGlzLnRpbGUuZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IFRJTEVfTUFSR0lOID0gMTsgLy9weFxuICAgICAgICAgICAgY29uc3Qgb25lVGlsZVNwYWNlID0gYmIud2lkdGggKyAyICogVElMRV9NQVJHSU47XG4gICAgICAgICAgICB0aGlzLmJvYXJkV2lkdGggPSBvbmVUaWxlU3BhY2UgKiB0aGlzLl9tYW5hZ2VyLmVsZW1lbnRzSW5Sb3c7XG5cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7TW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtDb21tb25Nb2R1bGV9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1RldHJpc0NvcmVDb21wb25lbnR9IGZyb20gJy4vdGV0cmlzLWNvcmUuY29tcG9uZW50JztcbmltcG9ydCB7Qm9hcmRDb21wb25lbnR9IGZyb20gJy4vYm9hcmQvYm9hcmQuY29tcG9uZW50JztcbmltcG9ydCB7R2FtZU1hbmFnZXJTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL2dhbWUtbWFuYWdlci5zZXJ2aWNlJztcbmltcG9ydCB7VGlsZUNvbXBvbmVudH0gZnJvbSAnLi90aWxlL3RpbGUuY29tcG9uZW50JztcblxuZXhwb3J0ICogZnJvbSAnLi90ZXRyaXMtY29yZS5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICAgIGltcG9ydHM6IFtcbiAgICAgICAgQ29tbW9uTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgVGV0cmlzQ29yZUNvbXBvbmVudCxcbiAgICAgICAgQm9hcmRDb21wb25lbnQsXG4gICAgICAgIFRpbGVDb21wb25lbnRcbiAgICBdLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICBHYW1lTWFuYWdlclNlcnZpY2VcbiAgICBdLFxuICAgIGV4cG9ydHM6IFtUZXRyaXNDb3JlQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBUZXRyaXNDb3JlTW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBUZXRyaXNDb3JlTW9kdWxlXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInRzbGliXzEuX19leHRlbmRzIiwiTUFQUyIsIlN1YmplY3QiLCJJbmplY3RhYmxlIiwiRXZlbnRFbWl0dGVyIiwiQ29tcG9uZW50IiwiSW5wdXQiLCJPdXRwdXQiLCJWaWV3RW5jYXBzdWxhdGlvbiIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiRWxlbWVudFJlZiIsIlJlbmRlcmVyMiIsIlZpZXdDaGlsZCIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7SUFBQTs7Ozs7Ozs7Ozs7Ozs7SUFjQTtJQUVBLElBQUksYUFBYSxHQUFHLFVBQVMsQ0FBQyxFQUFFLENBQUM7UUFDN0IsYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO2FBQ2hDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxZQUFZLEtBQUssSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzVFLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7Z0JBQUUsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztvQkFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMvRSxPQUFPLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL0IsQ0FBQyxDQUFDO0FBRUYsdUJBQTBCLENBQUMsRUFBRSxDQUFDO1FBQzFCLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEIsZ0JBQWdCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLEVBQUU7UUFDdkMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFH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