/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
var PieceRotation = {
    DEG_0: 0,
    DEG_90: 1,
    DEG_180: 2,
    DEG_270: 3,
};
export { PieceRotation };
PieceRotation[PieceRotation.DEG_0] = 'DEG_0';
PieceRotation[PieceRotation.DEG_90] = 'DEG_90';
PieceRotation[PieceRotation.DEG_180] = 'DEG_180';
PieceRotation[PieceRotation.DEG_270] = 'DEG_270';
/** @enum {number} */
var PieceTypes = {
    Dot: 1,
    Box: 2,
    Line: 3,
    T: 4,
    L: 5,
    Lr: 6,
    Z: 7,
    S: 8,
};
export { PieceTypes };
PieceTypes[PieceTypes.Dot] = 'Dot';
PieceTypes[PieceTypes.Box] = 'Box';
PieceTypes[PieceTypes.Line] = 'Line';
PieceTypes[PieceTypes.T] = 'T';
PieceTypes[PieceTypes.L] = 'L';
PieceTypes[PieceTypes.Lr] = 'Lr';
PieceTypes[PieceTypes.Z] = 'Z';
PieceTypes[PieceTypes.S] = 'S';
/** @enum {string} */
var PieceColors = {
    Box: 'color-box',
    Dot: 'color-dot',
    Line: 'color-line',
    T: 'color-t',
    L: 'color-l',
    Lr: 'color-lr',
    Z: 'color-z',
    S: 'color-s',
};
export { PieceColors };
var Piece = /** @class */ (function () {
    function Piece(x, y, gridSize, maps) {
        this.color = 'red';
        this.rotation = PieceRotation.DEG_0;
        this.map = [
            [], []
        ];
        this._lastConfig = null;
        this._gridSize = gridSize;
        this.x = x;
        this.y = y;
        this._maps = maps;
        this.map = this._maps[this.rotation];
    }
    Object.defineProperty(Piece.prototype, "positionsOnGrid", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var acc = [];
            for (var row = 0; row < 4; row++) {
                for (var col = 0; col < 4; col++) {
                    if (this.map[row][col]) {
                        /** @type {?} */
                        var pos = (this.y + row) * this._gridSize.width + this.x + col;
                        if (pos > 0) {
                            acc.push(pos);
                        }
                    }
                }
            }
            return acc;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    Piece.prototype.store = /**
     * @return {?}
     */
    function () {
        this._lastConfig = {
            x: this.x,
            y: this.y,
            rotation: this.rotation,
            map: this.map
        };
    };
    /**
     * @return {?}
     */
    Piece.prototype.clearStore = /**
     * @return {?}
     */
    function () {
        this._lastConfig = null;
    };
    /**
     * @return {?}
     */
    Piece.prototype.revert = /**
     * @return {?}
     */
    function () {
        if (this._lastConfig) {
            for (var x in this._lastConfig) {
                if (this._lastConfig.hasOwnProperty(x)) {
                    this[x] = this._lastConfig[x];
                }
            }
            this._lastConfig = null;
        }
    };
    /**
     * @return {?}
     */
    Piece.prototype.rotate = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var keys = Object.keys(this._maps);
        /** @type {?} */
        var idx = keys.indexOf(this.rotation.toString());
        if (idx >= keys.length - 1) {
            this.rotation = /** @type {?} */ (keys[0]);
        }
        else {
            this.rotation = /** @type {?} */ (keys[++idx]);
        }
        this.map = this._maps[this.rotation];
    };
    /**
     * @return {?}
     */
    Piece.prototype.moveDown = /**
     * @return {?}
     */
    function () {
        this.y++;
    };
    /**
     * @return {?}
     */
    Piece.prototype.moveRight = /**
     * @return {?}
     */
    function () {
        this.x++;
    };
    /**
     * @return {?}
     */
    Piece.prototype.moveLeft = /**
     * @return {?}
     */
    function () {
        this.x--;
    };
    Object.defineProperty(Piece.prototype, "bottomRow", {
        get: /**
         * @return {?}
         */
        function () {
            return this.y + 3;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Piece.prototype, "rightCol", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var col = 3;
            while (col >= 0) {
                for (var row = 0; row <= 3; row++) {
                    if (this.map[row][col]) {
                        return this.x + col;
                    }
                }
                col--;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Piece.prototype, "leftCol", {
        get: /**
         * @return {?}
         */
        function () {
            return this.x;
        },
        enumerable: true,
        configurable: true
    });
    return Piece;
}());
export { Piece };
if (false) {
    /** @type {?} */
    Piece.prototype.color;
    /** @type {?} */
    Piece.prototype.x;
    /** @type {?} */
    Piece.prototype.y;
    /** @type {?} */
    Piece.prototype.rotation;
    /** @type {?} */
    Piece.prototype._maps;
    /** @type {?} */
    Piece.prototype.map;
    /** @type {?} */
    Piece.prototype._gridSize;
    /** @type {?} */
    Piece.prototype._lastConfig;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGllY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtdGV0cmlzLyIsInNvdXJjZXMiOlsiY2xhc3Nlcy9QaWVjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7SUFDSSxRQUFTO0lBQ1QsU0FBVTtJQUNWLFVBQVc7SUFDWCxVQUFXOzs7NEJBSFgsS0FBSzs0QkFDTCxNQUFNOzRCQUNOLE9BQU87NEJBQ1AsT0FBTzs7O0lBS1AsTUFBTztJQUNQLE1BQU87SUFDUCxPQUFRO0lBQ1IsSUFBSztJQUNMLElBQUs7SUFDTCxLQUFNO0lBQ04sSUFBSztJQUNMLElBQUs7OztzQkFQTCxHQUFHO3NCQUNILEdBQUc7c0JBQ0gsSUFBSTtzQkFDSixDQUFDO3NCQUNELENBQUM7c0JBQ0QsRUFBRTtzQkFDRixDQUFDO3NCQUNELENBQUM7OztJQUtELEtBQU0sV0FBVztJQUNqQixLQUFNLFdBQVc7SUFDakIsTUFBTyxZQUFZO0lBQ25CLEdBQUksU0FBUztJQUNiLEdBQUksU0FBUztJQUNiLElBQUssVUFBVTtJQUNmLEdBQUksU0FBUztJQUNiLEdBQUksU0FBUzs7O0FBR2pCLElBQUE7SUFjSSxlQUFZLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUk7cUJBYnhCLEtBQUs7d0JBR2EsYUFBYSxDQUFDLEtBQUs7bUJBR1Y7WUFDL0IsRUFBRSxFQUFFLEVBQUU7U0FDVDsyQkFHMEIsSUFBSTtRQUczQixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFFbEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN4QztJQUVELHNCQUFJLGtDQUFlOzs7O1FBQW5COztZQUNJLElBQU0sR0FB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QUFJLDJCQUFROzs7O1FBQVo7O1lBQ0ksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ1osT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ2QsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztvQkFDaEMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ3JCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztxQkFDdkI7aUJBQ0o7Z0JBQ0QsR0FBRyxFQUFFLENBQUM7YUFDVDtTQUVKOzs7T0FBQTtJQUVELHNCQUFJLDBCQUFPOzs7O1FBQVg7WUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztTQUNqQjs7O09BQUE7Z0JBMUlMO0lBMklDLENBQUE7QUE1R0QsaUJBNEdDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUGllY2VSb3RhdGlvbiB7XG4gICAgREVHXzAgPSAwLFxuICAgIERFR185MCA9IDEsXG4gICAgREVHXzE4MCA9IDIsXG4gICAgREVHXzI3MCA9IDNcbn1cblxuXG5leHBvcnQgZW51bSBQaWVjZVR5cGVzIHtcbiAgICBEb3QgPSAxLFxuICAgIEJveCA9IDIsXG4gICAgTGluZSA9IDMsXG4gICAgVCA9IDQsXG4gICAgTCA9IDUsXG4gICAgTHIgPSA2LFxuICAgIFogPSA3LFxuICAgIFMgPSA4XG59XG5cbi8vIHBpY2tlZCBmcm9tIGh0dHBzOi8vd3d3LnJvbWFuem9sb3RhcmV2LmNvbS9waWNvLTgtY29sb3ItcGFsZXR0ZS9cbmV4cG9ydCBlbnVtIFBpZWNlQ29sb3JzIHtcbiAgICBCb3ggPSAnY29sb3ItYm94JyxcbiAgICBEb3QgPSAnY29sb3ItZG90JyxcbiAgICBMaW5lID0gJ2NvbG9yLWxpbmUnLFxuICAgIFQgPSAnY29sb3ItdCcsXG4gICAgTCA9ICdjb2xvci1sJyxcbiAgICBMciA9ICdjb2xvci1scicsXG4gICAgWiA9ICdjb2xvci16JyxcbiAgICBTID0gJ2NvbG9yLXMnXG59XG5cbmV4cG9ydCBjbGFzcyBQaWVjZSB7XG4gICAgY29sb3IgPSAncmVkJztcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICAgIHJvdGF0aW9uOiBQaWVjZVJvdGF0aW9uID0gUGllY2VSb3RhdGlvbi5ERUdfMDtcblxuICAgIHByaXZhdGUgX21hcHM6IHt9O1xuICAgIHB1YmxpYyBtYXA6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW1xuICAgICAgICBbXSwgW11cbiAgICBdO1xuXG4gICAgcHJpdmF0ZSBfZ3JpZFNpemU7XG4gICAgcHJpdmF0ZSBfbGFzdENvbmZpZzogYW55ID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplLCBtYXBzKSB7XG4gICAgICAgIHRoaXMuX2dyaWRTaXplID0gZ3JpZFNpemU7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuX21hcHMgPSBtYXBzO1xuXG4gICAgICAgIHRoaXMubWFwID0gdGhpcy5fbWFwc1t0aGlzLnJvdGF0aW9uXTtcbiAgICB9XG5cbiAgICBnZXQgcG9zaXRpb25zT25HcmlkKCkge1xuICAgICAgICBjb25zdCBhY2MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwW3Jvd11bY29sXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSAodGhpcy55ICsgcm93KSAqIHRoaXMuX2dyaWRTaXplLndpZHRoICsgdGhpcy54ICsgY29sO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2gocG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3JlKCkge1xuICAgICAgICB0aGlzLl9sYXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55LFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICAgICAgICBtYXA6IHRoaXMubWFwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyU3RvcmUoKSB7XG4gICAgICAgIHRoaXMuX2xhc3RDb25maWcgPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXZlcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9sYXN0Q29uZmlnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gdGhpcy5fbGFzdENvbmZpZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0Q29uZmlnLmhhc093blByb3BlcnR5KHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbeF0gPSB0aGlzLl9sYXN0Q29uZmlnW3hdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbGFzdENvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcm90YXRlKCkge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fbWFwcyk7XG4gICAgICAgIGxldCBpZHggPSBrZXlzLmluZGV4T2YodGhpcy5yb3RhdGlvbi50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKGlkeCA+PSBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBrZXlzWzBdIGFzIGFueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBrZXlzWysraWR4XSBhcyBhbnk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hcCA9IHRoaXMuX21hcHNbdGhpcy5yb3RhdGlvbl07XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVEb3duKCkge1xuICAgICAgICB0aGlzLnkrKztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVJpZ2h0KCkge1xuICAgICAgICB0aGlzLngrKztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZUxlZnQoKSB7XG4gICAgICAgIHRoaXMueC0tO1xuICAgIH1cblxuICAgIGdldCBib3R0b21Sb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnkgKyAzO1xuICAgIH1cblxuICAgIGdldCByaWdodENvbCgpIHtcbiAgICAgICAgbGV0IGNvbCA9IDM7XG4gICAgICAgIHdoaWxlIChjb2wgPj0gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDw9IDM7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwW3Jvd11bY29sXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54ICsgY29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbC0tO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBnZXQgbGVmdENvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9XG59XG4iXX0=