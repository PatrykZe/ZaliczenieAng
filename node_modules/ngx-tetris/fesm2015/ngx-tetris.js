import { Injectable, Component, EventEmitter, Input, Output, ChangeDetectionStrategy, ElementRef, Renderer2, ViewEncapsulation, ViewChild, NgModule } from '@angular/core';
import { Subject } from 'rxjs/internal/Subject';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
const PieceRotation = {
    DEG_0: 0,
    DEG_90: 1,
    DEG_180: 2,
    DEG_270: 3,
};
PieceRotation[PieceRotation.DEG_0] = 'DEG_0';
PieceRotation[PieceRotation.DEG_90] = 'DEG_90';
PieceRotation[PieceRotation.DEG_180] = 'DEG_180';
PieceRotation[PieceRotation.DEG_270] = 'DEG_270';
/** @enum {number} */
const PieceTypes = {
    Dot: 1,
    Box: 2,
    Line: 3,
    T: 4,
    L: 5,
    Lr: 6,
    Z: 7,
    S: 8,
};
PieceTypes[PieceTypes.Dot] = 'Dot';
PieceTypes[PieceTypes.Box] = 'Box';
PieceTypes[PieceTypes.Line] = 'Line';
PieceTypes[PieceTypes.T] = 'T';
PieceTypes[PieceTypes.L] = 'L';
PieceTypes[PieceTypes.Lr] = 'Lr';
PieceTypes[PieceTypes.Z] = 'Z';
PieceTypes[PieceTypes.S] = 'S';
/** @enum {string} */
const PieceColors = {
    Box: 'color-box',
    Dot: 'color-dot',
    Line: 'color-line',
    T: 'color-t',
    L: 'color-l',
    Lr: 'color-lr',
    Z: 'color-z',
    S: 'color-s',
};
class Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     * @param {?} maps
     */
    constructor(x, y, gridSize, maps) {
        this.color = 'red';
        this.rotation = PieceRotation.DEG_0;
        this.map = [
            [], []
        ];
        this._lastConfig = null;
        this._gridSize = gridSize;
        this.x = x;
        this.y = y;
        this._maps = maps;
        this.map = this._maps[this.rotation];
    }
    /**
     * @return {?}
     */
    get positionsOnGrid() {
        /** @type {?} */
        const acc = [];
        for (let row = 0; row < 4; row++) {
            for (let col = 0; col < 4; col++) {
                if (this.map[row][col]) {
                    /** @type {?} */
                    const pos = (this.y + row) * this._gridSize.width + this.x + col;
                    if (pos > 0) {
                        acc.push(pos);
                    }
                }
            }
        }
        return acc;
    }
    /**
     * @return {?}
     */
    store() {
        this._lastConfig = {
            x: this.x,
            y: this.y,
            rotation: this.rotation,
            map: this.map
        };
    }
    /**
     * @return {?}
     */
    clearStore() {
        this._lastConfig = null;
    }
    /**
     * @return {?}
     */
    revert() {
        if (this._lastConfig) {
            for (const x in this._lastConfig) {
                if (this._lastConfig.hasOwnProperty(x)) {
                    this[x] = this._lastConfig[x];
                }
            }
            this._lastConfig = null;
        }
    }
    /**
     * @return {?}
     */
    rotate() {
        /** @type {?} */
        const keys = Object.keys(this._maps);
        /** @type {?} */
        let idx = keys.indexOf(this.rotation.toString());
        if (idx >= keys.length - 1) {
            this.rotation = /** @type {?} */ (keys[0]);
        }
        else {
            this.rotation = /** @type {?} */ (keys[++idx]);
        }
        this.map = this._maps[this.rotation];
    }
    /**
     * @return {?}
     */
    moveDown() {
        this.y++;
    }
    /**
     * @return {?}
     */
    moveRight() {
        this.x++;
    }
    /**
     * @return {?}
     */
    moveLeft() {
        this.x--;
    }
    /**
     * @return {?}
     */
    get bottomRow() {
        return this.y + 3;
    }
    /**
     * @return {?}
     */
    get rightCol() {
        /** @type {?} */
        let col = 3;
        while (col >= 0) {
            for (let row = 0; row <= 3; row++) {
                if (this.map[row][col]) {
                    return this.x + col;
                }
            }
            col--;
        }
    }
    /**
     * @return {?}
     */
    get leftCol() {
        return this.x;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS = [];
MAPS[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Box, undefined, undefined, undefined],
];
class Dot extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS);
        this.color = PieceColors['Dot'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$1 = [];
MAPS$1[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Box, PieceTypes.Box, undefined, undefined],
    [PieceTypes.Box, PieceTypes.Box, undefined, undefined],
];
class Box extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$1);
        this.color = PieceColors['Box'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$2 = [];
MAPS$2[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Line, PieceTypes.Line, PieceTypes.Line, PieceTypes.Line],
];
MAPS$2[PieceRotation.DEG_90] = [
    [PieceTypes.Line, undefined, undefined, undefined],
    [PieceTypes.Line, undefined, undefined, undefined],
    [PieceTypes.Line, undefined, undefined, undefined],
    [PieceTypes.Line, undefined, undefined, undefined],
];
class Line extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$2);
        this.color = PieceColors['Line'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$3 = {};
MAPS$3[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, PieceTypes.T, undefined, undefined],
    [PieceTypes.T, PieceTypes.T, PieceTypes.T, undefined],
];
MAPS$3[PieceRotation.DEG_90] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.T, undefined, undefined, undefined],
    [PieceTypes.T, PieceTypes.T, undefined, undefined],
    [PieceTypes.T, undefined, undefined, undefined],
];
MAPS$3[PieceRotation.DEG_180] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.T, PieceTypes.T, PieceTypes.T, undefined],
    [undefined, PieceTypes.T, undefined, undefined],
];
MAPS$3[PieceRotation.DEG_270] = [
    [undefined, undefined, undefined, undefined],
    [undefined, PieceTypes.T, undefined, undefined],
    [PieceTypes.T, PieceTypes.T, undefined, undefined],
    [undefined, PieceTypes.T, undefined, undefined],
];
class T extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$3);
        this.color = PieceColors['T'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$4 = {};
MAPS$4[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [undefined, PieceTypes.Z, undefined, undefined],
    [PieceTypes.Z, PieceTypes.Z, undefined, undefined],
    [PieceTypes.Z, undefined, undefined, undefined],
];
MAPS$4[PieceRotation.DEG_90] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Z, PieceTypes.Z, undefined, undefined],
    [undefined, PieceTypes.Z, PieceTypes.Z, undefined],
];
class Z extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$4);
        this.color = PieceColors['Z'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$5 = {};
MAPS$5[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.S, undefined, undefined, undefined],
    [PieceTypes.S, PieceTypes.S, undefined, undefined],
    [undefined, PieceTypes.S, undefined, undefined],
];
MAPS$5[PieceRotation.DEG_90] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, PieceTypes.S, PieceTypes.S, undefined],
    [PieceTypes.S, PieceTypes.S, undefined, undefined],
];
class S extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$5);
        this.color = PieceColors['S'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$6 = {};
MAPS$6[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.L, undefined, undefined, undefined],
    [PieceTypes.L, undefined, undefined, undefined],
    [PieceTypes.L, PieceTypes.L, undefined, undefined],
];
MAPS$6[PieceRotation.DEG_90] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.L, PieceTypes.L, PieceTypes.L, undefined],
    [PieceTypes.L, undefined, undefined, undefined],
];
MAPS$6[PieceRotation.DEG_180] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.L, PieceTypes.L, undefined, undefined],
    [undefined, PieceTypes.L, undefined, undefined],
    [undefined, PieceTypes.L, undefined, undefined],
];
MAPS$6[PieceRotation.DEG_270] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, PieceTypes.L, undefined],
    [PieceTypes.L, PieceTypes.L, PieceTypes.L, undefined],
];
class L extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$6);
        this.color = PieceColors['L'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const MAPS$7 = {};
MAPS$7[PieceRotation.DEG_0] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Lr, PieceTypes.Lr, undefined, undefined],
    [undefined, PieceTypes.Lr, undefined, undefined],
    [undefined, PieceTypes.Lr, undefined, undefined],
];
MAPS$7[PieceRotation.DEG_90] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, PieceTypes.Lr, undefined],
    [PieceTypes.Lr, PieceTypes.Lr, PieceTypes.Lr, undefined],
];
MAPS$7[PieceRotation.DEG_180] = [
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Lr, undefined, undefined, undefined],
    [PieceTypes.Lr, undefined, undefined, undefined],
    [PieceTypes.Lr, PieceTypes.Lr, undefined, undefined],
];
MAPS$7[PieceRotation.DEG_270] = [
    [undefined, undefined, undefined, undefined],
    [undefined, undefined, undefined, undefined],
    [PieceTypes.Lr, PieceTypes.Lr, PieceTypes.Lr, undefined],
    [PieceTypes.Lr, undefined, undefined, undefined],
];
class Lr extends Piece {
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} gridSize
     */
    constructor(x, y, gridSize) {
        super(x, y, gridSize, MAPS$7);
        this.color = PieceColors['Lr'];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class PiecesFactory {
    /**
     * @param {?} gridSize
     */
    constructor(gridSize) {
        this._available = [];
        this._gridSize = gridSize;
        this._available.push(Dot);
        this._available.push(Box);
        this._available.push(Line);
        this._available.push(T);
        this._available.push(Z);
        this._available.push(S);
        this._available.push(L);
        this._available.push(Lr);
    }
    /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    getRandomPiecePiece(x, y) {
        /** @type {?} */
        const idx = Math.floor(Math.random() * (this._available.length));
        return new this._available[idx](x, y, this._gridSize);
        // return new this._available[2](x, y, this._gridSize);
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const SPAWN_POSITION_X = 4;
/** @type {?} */
const SPAWN_POSITION_Y = -4;
class Tile {
    constructor() {
        this.solid = false;
        this.color = null;
    }
}
class GameManagerService {
    constructor() {
        this.settings = {
            tileSize: null
        };
        this._gridSize = { width: 0, height: 0 };
        this._locked = true;
        this._lineCleared = new Subject();
        this._gameOver = new Subject();
        this.lineCleared$ = this._lineCleared.asObservable();
        this.gameOver$ = this._gameOver.asObservable();
    }
    /**
     * @return {?}
     */
    get elementsInRow() {
        return this._gridSize.width;
    }
    /**
     * @param {?} width
     * @param {?} height
     * @param {?} gameSpeed
     * @param {?=} tileSize
     * @return {?}
     */
    initialize(width, height, gameSpeed, tileSize) {
        this._gridSize.width = width;
        this._gridSize.height = height;
        this._gameSpeed = gameSpeed;
        this._piecesFactory = new PiecesFactory(this._gridSize);
        if (tileSize) {
            this.settings.tileSize = tileSize;
        }
        this._initializeEmptyBoard();
        this._spawnNewPiece();
        this._drawPiece();
    }
    /**
     * @return {?}
     */
    start() {
        clearInterval(this._gameInterval);
        this._gameInterval = setInterval(() => {
            this._update();
        }, this._gameSpeed);
        this._locked = false;
    }
    /**
     * @return {?}
     */
    stop() {
        this._locked = true;
        clearInterval(this._gameInterval);
    }
    /**
     * @return {?}
     */
    reset() {
        /** @type {?} */
        const emptyTile = new Tile();
        for (let pos = 0; pos < this.grid.length; pos++) {
            if (this.grid[pos].color || this.grid[pos].solid) {
                this.__changeCell(pos, emptyTile);
            }
        }
        this._spawnNewPiece();
        this._drawPiece();
    }
    /**
     * @return {?}
     */
    moveLeft() {
        if (this._locked) {
            return;
        }
        this._clearPiece();
        this._piece.store();
        this._piece.moveLeft();
        if (this._collidesLeft()) {
            this._piece.revert();
        }
        this._drawPiece();
    }
    /**
     * @return {?}
     */
    moveRight() {
        if (this._locked) {
            return;
        }
        this._clearPiece();
        this._piece.store();
        this._piece.moveRight();
        if (this._collidesRight()) {
            this._piece.revert();
        }
        this._drawPiece();
    }
    /**
     * @return {?}
     */
    rotate() {
        if (this._locked) {
            return;
        }
        this._clearPiece();
        this._piece.store();
        this._piece.rotate();
        while (this._collidesRight()) {
            this._piece.moveLeft();
            if (this._collidesLeft()) {
                this._piece.revert();
                break;
            }
        }
        this._drawPiece();
    }
    /**
     * @return {?}
     */
    moveDown() {
        this._update();
    }
    /**
     * @return {?}
     */
    _clearFullLines() {
        for (let row = this._gridSize.height - 1; row >= 0; row--) {
            /** @type {?} */
            let isFull = true;
            for (let col = 0; col < this._gridSize.width; col++) {
                /** @type {?} */
                const pos = row * this._gridSize.width + col;
                if (this.grid[pos].solid === false) {
                    isFull = false;
                    break;
                }
            }
            if (isFull) {
                /** @type {?} */
                const emptyRow = Array.apply(null, Array(this._gridSize.width))
                    .map((idx) => new Tile());
                /** @type {?} */
                const topPortion = this.grid.slice(0, row * this._gridSize.width);
                this.grid.splice(0, ++row * this._gridSize.width, ...emptyRow.concat(topPortion));
                this._lineCleared.next();
            }
        }
    }
    /**
     * @return {?}
     */
    _update() {
        if (this._locked) {
            return;
        }
        this._locked = true;
        this._piece.revert();
        this._clearPiece();
        this._piece.store();
        this._piece.moveDown();
        if (this._collidesBottom()) {
            this._piece.revert();
            this._markSolid();
            this._drawPiece();
            this._clearFullLines();
            this._spawnNewPiece();
            if (this._isGameOver()) {
                this._onGameOver();
                return;
            }
        }
        this._drawPiece();
        this._locked = false;
    }
    /**
     * @return {?}
     */
    _isGameOver() {
        this._piece.store();
        this._piece.moveDown();
        if (this._collidesBottom()) {
            return true;
        }
        this._piece.revert();
        return false;
    }
    /**
     * @return {?}
     */
    _onGameOver() {
        this.stop();
        this._gameOver.next();
    }
    /**
     * @return {?}
     */
    _spawnNewPiece() {
        this._piece = this._piecesFactory.getRandomPiecePiece(SPAWN_POSITION_X, SPAWN_POSITION_Y);
    }
    /**
     * @return {?}
     */
    _initializeEmptyBoard() {
        /** @type {?} */
        const cellsCount = this._gridSize.width * this._gridSize.height;
        this.grid = Array.apply(null, Array(cellsCount))
            .map((idx) => new Tile());
    }
    /**
     * @return {?}
     */
    _clearPiece() {
        this._piece.positionsOnGrid
            .forEach((pos) => {
            this.__changeCell(pos, { color: undefined });
        });
    }
    /**
     * @return {?}
     */
    _drawPiece() {
        this._piece.clearStore();
        this._piece.positionsOnGrid
            .forEach((pos) => {
            this.__changeCell(pos, { color: this._piece.color });
        });
    }
    /**
     * @return {?}
     */
    _markSolid() {
        this._piece.positionsOnGrid.forEach((pos) => {
            this.__changeCell(pos, { solid: true });
        });
    }
    /**
     * @param {?} pos
     * @param {?=} data
     * @return {?}
     */
    __changeCell(pos, data = {}) {
        this.grid[pos] = Object.assign({}, this.grid[pos], data);
    }
    /**
     * @return {?}
     */
    _collidesBottom() {
        if (this._piece.bottomRow >= this._gridSize.height) {
            return true;
        }
        return this.__collides();
    }
    /**
     * @return {?}
     */
    _collidesLeft() {
        if (this._piece.leftCol < 0) {
            return true;
        }
        return this.__collides();
    }
    /**
     * @return {?}
     */
    _collidesRight() {
        if (this._piece.rightCol >= this._gridSize.width) {
            return true;
        }
        return this.__collides();
    }
    /**
     * @return {?}
     */
    __collides() {
        return this._piece.positionsOnGrid
            .some((pos) => {
            if (pos > 0 && this.grid[pos] && this.grid[pos].solid) {
                return true;
            }
            return false;
        });
    }
}
GameManagerService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
GameManagerService.ctorParameters = () => [];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const GAME_SPEED = 500;
/** @type {?} */
const MOVE_DOWN_SPEED = 0.2; // fraction of initial game speed
/** @enum {number} */
const GameState = {
    Paused: 0,
    Started: 1,
    Over: 2,
};
GameState[GameState.Paused] = 'Paused';
GameState[GameState.Started] = 'Started';
GameState[GameState.Over] = 'Over';
class TetrisCoreComponent {
    /**
     * @param {?} _manager
     */
    constructor(_manager) {
        this._manager = _manager;
        this.rotate = false;
        this.moveLeft = false;
        this.moveRight = false;
        this.moveDown = false;
        this.start = false;
        this.stop = false;
        this.reset = false;
        this.lineCleared = new EventEmitter();
        this.gameOver = new EventEmitter();
        this.state = GameState.Paused;
        this.gridWidth = 10;
        this.gridHeight = 20;
        this._manager.lineCleared$.subscribe((data) => this._onLineCleared(data));
        this._manager.gameOver$.subscribe((data) => this._onGameOver(data));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.initialSpeed = this.initialSpeed || GAME_SPEED;
        this._moveDownSpeed = this.initialSpeed * MOVE_DOWN_SPEED;
        this._manager.initialize(this.gridWidth, this.gridHeight, this.initialSpeed, this.tileSize);
        this.grid = this._manager.grid;
        setInterval(() => {
            if (this.moveDown) {
                this._manager.moveDown();
            }
        }, this._moveDownSpeed);
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (this._keyPressed(changes.moveLeft)) {
            this._manager.moveLeft();
        }
        else if (this._keyPressed(changes.moveRight)) {
            this._manager.moveRight();
        }
        if (this._keyPressed(changes.rotate)) {
            this._manager.rotate();
        }
        if (this._keyPressed(changes.start)) {
            this._manager.start();
        }
        if (this._keyPressed(changes.stop)) {
            this._manager.stop();
        }
        if (this._keyPressed(changes.reset)) {
            this._manager.reset();
        }
    }
    /**
     * @return {?}
     */
    actionLeft() { this._manager.moveLeft(); }
    /**
     * @return {?}
     */
    actionRight() { this._manager.moveRight(); }
    /**
     * @return {?}
     */
    actionRotate() { this._manager.rotate(); }
    /**
     * @return {?}
     */
    actionDown() { this._manager.moveDown(); }
    /**
     * @return {?}
     */
    actionReset() { this._manager.reset(); }
    /**
     * @return {?}
     */
    actionStart() {
        this._manager.start();
        this.state = GameState.Started;
    }
    /**
     * @return {?}
     */
    actionStop() {
        this._manager.stop();
        this.state = GameState.Paused;
    }
    /**
     * @param {?} key
     * @return {?}
     */
    _keyPressed(key) {
        return key && key.currentValue && !key.previousValue;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _onLineCleared(data) {
        this.lineCleared.emit(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _onGameOver(data) {
        this.state = GameState.Over;
        this.gameOver.emit();
    }
}
TetrisCoreComponent.decorators = [
    { type: Component, args: [{
                selector: 'tetris-core',
                template: "<board\n    [grid]=\"grid\"></board>\n"
            }] }
];
/** @nocollapse */
TetrisCoreComponent.ctorParameters = () => [
    { type: GameManagerService }
];
TetrisCoreComponent.propDecorators = {
    tileSize: [{ type: Input }],
    initialSpeed: [{ type: Input }],
    rotate: [{ type: Input }],
    moveLeft: [{ type: Input }],
    moveRight: [{ type: Input }],
    moveDown: [{ type: Input }],
    start: [{ type: Input }],
    stop: [{ type: Input }],
    reset: [{ type: Input }],
    lineCleared: [{ type: Output }],
    gameOver: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TileComponent {
    /**
     * @param {?} el
     * @param {?} _renderer
     * @param {?} _manager
     */
    constructor(el, _renderer, _manager) {
        this.el = el;
        this._renderer = _renderer;
        this._manager = _manager;
        this.tileSize = null;
        if (this._manager.settings.tileSize) {
            this.tileSize = this._manager.settings.tileSize;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.data.color) {
            this._renderer.addClass(this.el.nativeElement, this.data.color);
        }
    }
}
TileComponent.decorators = [
    { type: Component, args: [{
                selector: 'tile',
                template: "",
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                // tslint:disable-next-line
                host: {
                    '[style.width]': 'tileSize',
                    '[style.height]': 'tileSize'
                },
                styles: ["tile{display:block;background:rgba(176,230,225,.35);width:25px;height:25px;float:left;border:1px solid #4e4645;margin:1px}tile.color-box{background:#fca}tile.color-dot{background:#ff77a8}tile.color-line{background:#83769c}tile.color-t{background:#29adff}tile.color-l{background:#00e436}tile.color-lr{background:#ffec27}tile.color-z{background:#ffa300}tile.color-s{background:#c2c3c7}"]
            }] }
];
/** @nocollapse */
TileComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: GameManagerService }
];
TileComponent.propDecorators = {
    data: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class BoardComponent {
    /**
     * @param {?} _manager
     */
    constructor(_manager) {
        this._manager = _manager;
        this.boardWidth = null;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this._manager.settings.tileSize) {
            /** @type {?} */
            const bb = this.tile.el.nativeElement.getBoundingClientRect();
            /** @type {?} */
            const TILE_MARGIN = 1;
            /** @type {?} */
            const oneTileSpace = bb.width + 2 * TILE_MARGIN;
            this.boardWidth = oneTileSpace * this._manager.elementsInRow;
        }
    }
}
BoardComponent.decorators = [
    { type: Component, args: [{
                selector: 'board',
                template: "<tile *ngFor=\"let tileData of grid\"\n    [data]=\"tileData\">\n</tile>\n",
                host: {
                    '[style.width]': 'boardWidth + "px"',
                },
                styles: [":host{width:290px;display:block}"]
            }] }
];
/** @nocollapse */
BoardComponent.ctorParameters = () => [
    { type: GameManagerService }
];
BoardComponent.propDecorators = {
    grid: [{ type: Input }],
    tile: [{ type: ViewChild, args: [TileComponent,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TetrisCoreModule {
    /**
     * @return {?}
     */
    static forRoot() {
        return {
            ngModule: TetrisCoreModule
        };
    }
}
TetrisCoreModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    TetrisCoreComponent,
                    BoardComponent,
                    TileComponent
                ],
                providers: [
                    GameManagerService
                ],
                exports: [TetrisCoreComponent]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { TetrisCoreModule, GameState, TetrisCoreComponent, BoardComponent as ɵb, GameManagerService as ɵa, TileComponent as ɵc };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRldHJpcy5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL1BpZWNlLnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvRG90LnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvQm94LnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvTGluZS50cyIsIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL1QudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9aLnRzIiwibmc6Ly9uZ3gtdGV0cmlzL2NsYXNzZXMvUy50cyIsIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL0wudHMiLCJuZzovL25neC10ZXRyaXMvY2xhc3Nlcy9Mci50cyIsIm5nOi8vbmd4LXRldHJpcy9jbGFzc2VzL1BpZWNlc0ZhY3RvcnkudHMiLCJuZzovL25neC10ZXRyaXMvc2VydmljZXMvZ2FtZS1tYW5hZ2VyLnNlcnZpY2UudHMiLCJuZzovL25neC10ZXRyaXMvdGV0cmlzLWNvcmUuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtdGV0cmlzL3RpbGUvdGlsZS5jb21wb25lbnQudHMiLCJuZzovL25neC10ZXRyaXMvYm9hcmQvYm9hcmQuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtdGV0cmlzL3B1YmxpY19hcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUGllY2VSb3RhdGlvbiB7XG4gICAgREVHXzAgPSAwLFxuICAgIERFR185MCA9IDEsXG4gICAgREVHXzE4MCA9IDIsXG4gICAgREVHXzI3MCA9IDNcbn1cblxuXG5leHBvcnQgZW51bSBQaWVjZVR5cGVzIHtcbiAgICBEb3QgPSAxLFxuICAgIEJveCA9IDIsXG4gICAgTGluZSA9IDMsXG4gICAgVCA9IDQsXG4gICAgTCA9IDUsXG4gICAgTHIgPSA2LFxuICAgIFogPSA3LFxuICAgIFMgPSA4XG59XG5cbi8vIHBpY2tlZCBmcm9tIGh0dHBzOi8vd3d3LnJvbWFuem9sb3RhcmV2LmNvbS9waWNvLTgtY29sb3ItcGFsZXR0ZS9cbmV4cG9ydCBlbnVtIFBpZWNlQ29sb3JzIHtcbiAgICBCb3ggPSAnY29sb3ItYm94JyxcbiAgICBEb3QgPSAnY29sb3ItZG90JyxcbiAgICBMaW5lID0gJ2NvbG9yLWxpbmUnLFxuICAgIFQgPSAnY29sb3ItdCcsXG4gICAgTCA9ICdjb2xvci1sJyxcbiAgICBMciA9ICdjb2xvci1scicsXG4gICAgWiA9ICdjb2xvci16JyxcbiAgICBTID0gJ2NvbG9yLXMnXG59XG5cbmV4cG9ydCBjbGFzcyBQaWVjZSB7XG4gICAgY29sb3IgPSAncmVkJztcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICAgIHJvdGF0aW9uOiBQaWVjZVJvdGF0aW9uID0gUGllY2VSb3RhdGlvbi5ERUdfMDtcblxuICAgIHByaXZhdGUgX21hcHM6IHt9O1xuICAgIHB1YmxpYyBtYXA6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW1xuICAgICAgICBbXSwgW11cbiAgICBdO1xuXG4gICAgcHJpdmF0ZSBfZ3JpZFNpemU7XG4gICAgcHJpdmF0ZSBfbGFzdENvbmZpZzogYW55ID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplLCBtYXBzKSB7XG4gICAgICAgIHRoaXMuX2dyaWRTaXplID0gZ3JpZFNpemU7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuX21hcHMgPSBtYXBzO1xuXG4gICAgICAgIHRoaXMubWFwID0gdGhpcy5fbWFwc1t0aGlzLnJvdGF0aW9uXTtcbiAgICB9XG5cbiAgICBnZXQgcG9zaXRpb25zT25HcmlkKCkge1xuICAgICAgICBjb25zdCBhY2MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwW3Jvd11bY29sXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSAodGhpcy55ICsgcm93KSAqIHRoaXMuX2dyaWRTaXplLndpZHRoICsgdGhpcy54ICsgY29sO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2gocG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3JlKCkge1xuICAgICAgICB0aGlzLl9sYXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55LFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICAgICAgICBtYXA6IHRoaXMubWFwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyU3RvcmUoKSB7XG4gICAgICAgIHRoaXMuX2xhc3RDb25maWcgPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXZlcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9sYXN0Q29uZmlnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gdGhpcy5fbGFzdENvbmZpZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0Q29uZmlnLmhhc093blByb3BlcnR5KHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbeF0gPSB0aGlzLl9sYXN0Q29uZmlnW3hdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbGFzdENvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcm90YXRlKCkge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fbWFwcyk7XG4gICAgICAgIGxldCBpZHggPSBrZXlzLmluZGV4T2YodGhpcy5yb3RhdGlvbi50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKGlkeCA+PSBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBrZXlzWzBdIGFzIGFueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBrZXlzWysraWR4XSBhcyBhbnk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hcCA9IHRoaXMuX21hcHNbdGhpcy5yb3RhdGlvbl07XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVEb3duKCkge1xuICAgICAgICB0aGlzLnkrKztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVJpZ2h0KCkge1xuICAgICAgICB0aGlzLngrKztcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZUxlZnQoKSB7XG4gICAgICAgIHRoaXMueC0tO1xuICAgIH1cblxuICAgIGdldCBib3R0b21Sb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnkgKyAzO1xuICAgIH1cblxuICAgIGdldCByaWdodENvbCgpIHtcbiAgICAgICAgbGV0IGNvbCA9IDM7XG4gICAgICAgIHdoaWxlIChjb2wgPj0gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDw9IDM7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwW3Jvd11bY29sXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54ICsgY29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbC0tO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBnZXQgbGVmdENvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9XG59XG4iLCJpbXBvcnQge1BpZWNlLCBQaWVjZUNvbG9ycywgUGllY2VSb3RhdGlvbiwgUGllY2VUeXBlc30gZnJvbSAnLi9QaWVjZSc7XG5cbmNvbnN0IE1BUFMgPSBbXTtcbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWQsICAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWQsICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuQm94LCAgIHVuZGVmaW5lZCwgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuXTtcblxuZXhwb3J0IGNsYXNzIERvdCBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snRG90J107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5jb25zdCBNQVBTID0gW107XG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkJveCwgICBQaWVjZVR5cGVzLkJveCwgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkJveCwgICBQaWVjZVR5cGVzLkJveCwgICAgdW5kZWZpbmVkLCAgICB1bmRlZmluZWRdLFxuXTtcblxuXG5leHBvcnQgY2xhc3MgQm94IGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydCb3gnXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1BpZWNlLCBQaWVjZUNvbG9ycywgUGllY2VSb3RhdGlvbiwgUGllY2VUeXBlc30gZnJvbSAnLi9QaWVjZSc7XG5cbmNvbnN0IE1BUFMgPSBbXTtcbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICAgICB1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgICAgICB1bmRlZmluZWQsICAgICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgICAgdW5kZWZpbmVkLCAgICAgICAgIHVuZGVmaW5lZCwgICAgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTGluZSwgICBQaWVjZVR5cGVzLkxpbmUsICAgUGllY2VUeXBlcy5MaW5lLCAgUGllY2VUeXBlcy5MaW5lXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFtQaWVjZVR5cGVzLkxpbmUsICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZCwgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTGluZSwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkLCAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MaW5lLCAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWQsICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxpbmUsICAgdW5kZWZpbmVkLCAgIHVuZGVmaW5lZCwgIHVuZGVmaW5lZF0sXG5dO1xuXG5cbmV4cG9ydCBjbGFzcyBMaW5lIGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydMaW5lJ107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5cbmNvbnN0IE1BUFMgPSB7fTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuVCwgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIFBpZWNlVHlwZXMuVCwgICBQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlQsICAgUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18xODBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5ULCAgIFBpZWNlVHlwZXMuVCwgICBQaWVjZVR5cGVzLlQsICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzI3MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuVCwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlQsICAgUGllY2VUeXBlcy5ULCAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLlQsICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbl07XG5cbmV4cG9ydCBjbGFzcyBUIGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydUJ107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5cbmNvbnN0IE1BUFMgPSB7fTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgIFBpZWNlVHlwZXMuWiwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5aLCAgIFBpZWNlVHlwZXMuWiwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5aLCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5aLCAgIFBpZWNlVHlwZXMuWiwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5aLCAgIFBpZWNlVHlwZXMuWiwgIHVuZGVmaW5lZF0sXG5dO1xuXG5leHBvcnQgY2xhc3MgWiBleHRlbmRzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCBncmlkU2l6ZSkge1xuICAgICAgICBzdXBlcih4LCB5LCBncmlkU2l6ZSwgTUFQUyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBQaWVjZUNvbG9yc1snWiddO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5cbmNvbnN0IE1BUFMgPSB7fTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLlMsICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuUywgIFBpZWNlVHlwZXMuUywgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgUGllY2VUeXBlcy5TLCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR185MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICBQaWVjZVR5cGVzLlMsICAgUGllY2VUeXBlcy5TLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuUywgIFBpZWNlVHlwZXMuUywgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkXSxcbl07XG5cbmV4cG9ydCBjbGFzcyBTIGV4dGVuZHMgUGllY2Uge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIGdyaWRTaXplKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIGdyaWRTaXplLCBNQVBTKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IFBpZWNlQ29sb3JzWydTJ107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQaWVjZSwgUGllY2VDb2xvcnMsIFBpZWNlUm90YXRpb24sIFBpZWNlVHlwZXN9IGZyb20gJy4vUGllY2UnO1xuXG5cbmNvbnN0IE1BUFMgPSB7fTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18wXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIFBpZWNlVHlwZXMuTCwgICB1bmRlZmluZWQsICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfOTBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIFBpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkwsICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzE4MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIFBpZWNlVHlwZXMuTCwgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MLCAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLkwsICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMjcwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MLCAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MLCAgIFBpZWNlVHlwZXMuTCwgICBQaWVjZVR5cGVzLkwsICB1bmRlZmluZWRdLFxuXTtcblxuZXhwb3J0IGNsYXNzIEwgZXh0ZW5kcyBQaWVjZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgZ3JpZFNpemUpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgZ3JpZFNpemUsIE1BUFMpO1xuICAgICAgICB0aGlzLmNvbG9yID0gUGllY2VDb2xvcnNbJ0wnXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1BpZWNlLCBQaWVjZUNvbG9ycywgUGllY2VSb3RhdGlvbiwgUGllY2VUeXBlc30gZnJvbSAnLi9QaWVjZSc7XG5cblxuY29uc3QgTUFQUyA9IHt9O1xuXG5NQVBTW1BpZWNlUm90YXRpb24uREVHXzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxyLCAgUGllY2VUeXBlcy5MciwgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MciwgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgUGllY2VUeXBlcy5MciwgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR185MF0gPSBbXG4gICAgW3VuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkXSxcbiAgICBbdW5kZWZpbmVkLCAgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgICB1bmRlZmluZWRdLFxuICAgIFt1bmRlZmluZWQsICAgICAgIHVuZGVmaW5lZCwgICAgICBQaWVjZVR5cGVzLkxyLCAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTHIsICAgUGllY2VUeXBlcy5MciwgIFBpZWNlVHlwZXMuTHIsICAgdW5kZWZpbmVkXSxcbl07XG5cbk1BUFNbUGllY2VSb3RhdGlvbi5ERUdfMTgwXSA9IFtcbiAgICBbdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxyLCAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW1BpZWNlVHlwZXMuTHIsICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MciwgIFBpZWNlVHlwZXMuTHIsICB1bmRlZmluZWQsICAgICB1bmRlZmluZWRdLFxuXTtcblxuTUFQU1tQaWVjZVJvdGF0aW9uLkRFR18yNzBdID0gW1xuICAgIFt1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG4gICAgW3VuZGVmaW5lZCwgICAgICB1bmRlZmluZWQsICAgICAgdW5kZWZpbmVkLCAgICAgdW5kZWZpbmVkXSxcbiAgICBbUGllY2VUeXBlcy5MciwgIFBpZWNlVHlwZXMuTHIsICBQaWVjZVR5cGVzLkxyLCB1bmRlZmluZWRdLFxuICAgIFtQaWVjZVR5cGVzLkxyLCAgdW5kZWZpbmVkICwgICAgIHVuZGVmaW5lZCwgICAgIHVuZGVmaW5lZF0sXG5dO1xuXG5leHBvcnQgY2xhc3MgTHIgZXh0ZW5kcyBQaWVjZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgZ3JpZFNpemUpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgZ3JpZFNpemUsIE1BUFMpO1xuICAgICAgICB0aGlzLmNvbG9yID0gUGllY2VDb2xvcnNbJ0xyJ107XG4gICAgfVxufVxuIiwiaW1wb3J0IHtEb3R9IGZyb20gJy4vRG90JztcbmltcG9ydCB7Qm94fSBmcm9tICcuL0JveCc7XG5pbXBvcnQge0xpbmV9IGZyb20gJy4vTGluZSc7XG5pbXBvcnQge1R9IGZyb20gJy4vVCc7XG5pbXBvcnQge1p9IGZyb20gJy4vWic7XG5pbXBvcnQge1N9IGZyb20gJy4vUyc7XG5pbXBvcnQge0x9IGZyb20gJy4vTCc7XG5pbXBvcnQge0xyfSBmcm9tICcuL0xyJztcblxuZXhwb3J0IGNsYXNzIFBpZWNlc0ZhY3Rvcnkge1xuICAgIHByaXZhdGUgX2F2YWlsYWJsZSA9IFtdO1xuICAgIHByaXZhdGUgX2dyaWRTaXplO1xuXG4gICAgY29uc3RydWN0b3IoZ3JpZFNpemUpIHtcbiAgICAgICAgdGhpcy5fZ3JpZFNpemUgPSBncmlkU2l6ZTtcblxuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChEb3QpO1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChCb3gpO1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChMaW5lKTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goVCk7XG4gICAgICAgIHRoaXMuX2F2YWlsYWJsZS5wdXNoKFopO1xuICAgICAgICB0aGlzLl9hdmFpbGFibGUucHVzaChTKTtcbiAgICAgICAgdGhpcy5fYXZhaWxhYmxlLnB1c2goTCk7XG4gICAgICAgIHRoaXMuX2F2YWlsYWJsZS5wdXNoKExyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmFuZG9tUGllY2VQaWVjZSh4LCB5KSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLl9hdmFpbGFibGUubGVuZ3RoKSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9hdmFpbGFibGVbaWR4XSh4LCB5LCB0aGlzLl9ncmlkU2l6ZSk7XG4gICAgICAgIC8vIHJldHVybiBuZXcgdGhpcy5fYXZhaWxhYmxlWzJdKHgsIHksIHRoaXMuX2dyaWRTaXplKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0luamVjdGFibGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtQaWVjZX0gZnJvbSAnLi4vY2xhc3Nlcy9QaWVjZSc7XG5pbXBvcnQge1BpZWNlc0ZhY3Rvcnl9IGZyb20gJy4uL2NsYXNzZXMvUGllY2VzRmFjdG9yeSc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJ3J4anMvaW50ZXJuYWwvT2JzZXJ2YWJsZSc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMvaW50ZXJuYWwvU3ViamVjdCc7XG5cbmNvbnN0IFNQQVdOX1BPU0lUSU9OX1ggPSA0O1xuY29uc3QgU1BBV05fUE9TSVRJT05fWSA9IC00O1xuXG5leHBvcnQgY2xhc3MgVGlsZSB7XG4gICAgc29saWQgPSBmYWxzZTtcbiAgICBjb2xvciA9IG51bGw7XG59XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBHYW1lTWFuYWdlclNlcnZpY2Uge1xuICAgIHB1YmxpYyBzZXR0aW5ncyA9IHtcbiAgICAgICAgdGlsZVNpemU6IG51bGxcbiAgICB9O1xuXG4gICAgcHVibGljIGdldCBlbGVtZW50c0luUm93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZFNpemUud2lkdGg7XG4gICAgfVxuXG4gICAgLy8gc2VyaWFsaXplZCBncmlkIDopXG4gICAgcHVibGljIGdyaWQ6IEFycmF5PFRpbGU+O1xuXG4gICAgcHVibGljIGxpbmVDbGVhcmVkJDogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBnYW1lT3ZlciQ6IE9ic2VydmFibGU8YW55PjtcblxuICAgIHByaXZhdGUgX2dyaWRTaXplOiB7XG4gICAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICAgIGhlaWdodDogbnVtYmVyXG4gICAgfSA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuXG4gICAgcHJpdmF0ZSBfcGllY2U6IFBpZWNlO1xuICAgIHByaXZhdGUgX3BpZWNlc0ZhY3Rvcnk6IFBpZWNlc0ZhY3Rvcnk7XG5cbiAgICBwcml2YXRlIF9sb2NrZWQgPSB0cnVlO1xuICAgIHByaXZhdGUgX2dhbWVTcGVlZDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2dhbWVJbnRlcnZhbDtcblxuICAgIHByaXZhdGUgX2xpbmVDbGVhcmVkID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICAgIHByaXZhdGUgX2dhbWVPdmVyID0gbmV3IFN1YmplY3Q8YW55PigpO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGluZUNsZWFyZWQkID0gdGhpcy5fbGluZUNsZWFyZWQuYXNPYnNlcnZhYmxlKCk7XG4gICAgICAgIHRoaXMuZ2FtZU92ZXIkID0gdGhpcy5fZ2FtZU92ZXIuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXRpYWxpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGdhbWVTcGVlZCwgdGlsZVNpemU/OiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZ3JpZFNpemUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5fZ3JpZFNpemUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLl9nYW1lU3BlZWQgPSBnYW1lU3BlZWQ7XG4gICAgICAgIHRoaXMuX3BpZWNlc0ZhY3RvcnkgPSBuZXcgUGllY2VzRmFjdG9yeSh0aGlzLl9ncmlkU2l6ZSk7XG5cbiAgICAgICAgaWYgKHRpbGVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRpbGVTaXplID0gdGlsZVNpemU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pbml0aWFsaXplRW1wdHlCb2FyZCgpO1xuXG4gICAgICAgIHRoaXMuX3NwYXduTmV3UGllY2UoKTtcbiAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0KCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2dhbWVJbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuX2dhbWVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICB9LCB0aGlzLl9nYW1lU3BlZWQpO1xuICAgICAgICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5fbG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9nYW1lSW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXNldCgpIHtcbiAgICAgICAgY29uc3QgZW1wdHlUaWxlID0gbmV3IFRpbGUoKTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMDsgcG9zIDwgdGhpcy5ncmlkLmxlbmd0aDsgcG9zKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRbcG9zXS5jb2xvciB8fCB0aGlzLmdyaWRbcG9zXS5zb2xpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19jaGFuZ2VDZWxsKHBvcywgZW1wdHlUaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NwYXduTmV3UGllY2UoKTtcbiAgICAgICAgdGhpcy5fZHJhd1BpZWNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVMZWZ0KCkge1xuICAgICAgICBpZiAodGhpcy5fbG9ja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xlYXJQaWVjZSgpO1xuICAgICAgICB0aGlzLl9waWVjZS5zdG9yZSgpO1xuXG4gICAgICAgIHRoaXMuX3BpZWNlLm1vdmVMZWZ0KCk7XG4gICAgICAgIGlmICh0aGlzLl9jb2xsaWRlc0xlZnQoKSkge1xuICAgICAgICAgICAgdGhpcy5fcGllY2UucmV2ZXJ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kcmF3UGllY2UoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZVJpZ2h0KCkge1xuICAgICAgICBpZiAodGhpcy5fbG9ja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xlYXJQaWVjZSgpO1xuICAgICAgICB0aGlzLl9waWVjZS5zdG9yZSgpO1xuXG4gICAgICAgIHRoaXMuX3BpZWNlLm1vdmVSaWdodCgpO1xuICAgICAgICBpZiAodGhpcy5fY29sbGlkZXNSaWdodCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9waWVjZS5yZXZlcnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RyYXdQaWVjZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyByb3RhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9sb2NrZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NsZWFyUGllY2UoKTtcbiAgICAgICAgdGhpcy5fcGllY2Uuc3RvcmUoKTtcblxuICAgICAgICB0aGlzLl9waWVjZS5yb3RhdGUoKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuX2NvbGxpZGVzUmlnaHQoKSkge1xuICAgICAgICAgICAgdGhpcy5fcGllY2UubW92ZUxlZnQoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbGxpZGVzTGVmdCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGllY2UucmV2ZXJ0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kcmF3UGllY2UoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbW92ZURvd24oKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NsZWFyRnVsbExpbmVzKCkge1xuICAgICAgICBmb3IgKGxldCByb3cgPSB0aGlzLl9ncmlkU2l6ZS5oZWlnaHQgLSAxOyByb3cgPj0gMDsgcm93LS0pIHtcbiAgICAgICAgICAgIGxldCBpc0Z1bGwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgdGhpcy5fZ3JpZFNpemUud2lkdGg7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gcm93ICogdGhpcy5fZ3JpZFNpemUud2lkdGggKyBjb2w7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ3JpZFtwb3NdLnNvbGlkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpc0Z1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNGdWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW1wdHlSb3cgPSBBcnJheS5hcHBseShudWxsLCBBcnJheSh0aGlzLl9ncmlkU2l6ZS53aWR0aCkpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKGlkeCkgPT4gbmV3IFRpbGUoKSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0b3BQb3J0aW9uID0gdGhpcy5ncmlkLnNsaWNlKDAsIHJvdyAqIHRoaXMuX2dyaWRTaXplLndpZHRoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZC5zcGxpY2UoMCwgKytyb3cgKiB0aGlzLl9ncmlkU2l6ZS53aWR0aCwgLi4uZW1wdHlSb3cuY29uY2F0KHRvcFBvcnRpb24pKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9saW5lQ2xlYXJlZC5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9sb2NrZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2NrZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9waWVjZS5yZXZlcnQoKTtcblxuICAgICAgICB0aGlzLl9jbGVhclBpZWNlKCk7XG4gICAgICAgIHRoaXMuX3BpZWNlLnN0b3JlKCk7XG5cbiAgICAgICAgdGhpcy5fcGllY2UubW92ZURvd24oKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbGxpZGVzQm90dG9tKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3BpZWNlLnJldmVydCgpO1xuICAgICAgICAgICAgdGhpcy5fbWFya1NvbGlkKCk7XG4gICAgICAgICAgICB0aGlzLl9kcmF3UGllY2UoKTtcblxuICAgICAgICAgICAgdGhpcy5fY2xlYXJGdWxsTGluZXMoKTtcblxuICAgICAgICAgICAgdGhpcy5fc3Bhd25OZXdQaWVjZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29uR2FtZU92ZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kcmF3UGllY2UoKTtcbiAgICAgICAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNHYW1lT3ZlcigpIHtcbiAgICAgICAgdGhpcy5fcGllY2Uuc3RvcmUoKTtcbiAgICAgICAgdGhpcy5fcGllY2UubW92ZURvd24oKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbGxpZGVzQm90dG9tKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGllY2UucmV2ZXJ0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vbkdhbWVPdmVyKCkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5fZ2FtZU92ZXIubmV4dCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3NwYXduTmV3UGllY2UoKSB7XG4gICAgICAgIHRoaXMuX3BpZWNlID0gdGhpcy5fcGllY2VzRmFjdG9yeS5nZXRSYW5kb21QaWVjZVBpZWNlKFNQQVdOX1BPU0lUSU9OX1gsIFNQQVdOX1BPU0lUSU9OX1kpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2luaXRpYWxpemVFbXB0eUJvYXJkKCkge1xuICAgICAgICBjb25zdCBjZWxsc0NvdW50ID0gdGhpcy5fZ3JpZFNpemUud2lkdGggKiB0aGlzLl9ncmlkU2l6ZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuZ3JpZCA9IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGNlbGxzQ291bnQpKVxuICAgICAgICAgICAgLm1hcCgoaWR4KSA9PiBuZXcgVGlsZSgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jbGVhclBpZWNlKCkge1xuICAgICAgICB0aGlzLl9waWVjZS5wb3NpdGlvbnNPbkdyaWRcbiAgICAgICAgICAgIC5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fY2hhbmdlQ2VsbChwb3MsIHtjb2xvcjogdW5kZWZpbmVkfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9kcmF3UGllY2UoKSB7XG4gICAgICAgIHRoaXMuX3BpZWNlLmNsZWFyU3RvcmUoKTtcbiAgICAgICAgdGhpcy5fcGllY2UucG9zaXRpb25zT25HcmlkXG4gICAgICAgICAgICAuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2NoYW5nZUNlbGwocG9zLCB7Y29sb3I6IHRoaXMuX3BpZWNlLmNvbG9yfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXJrU29saWQoKSB7XG4gICAgICAgIHRoaXMuX3BpZWNlLnBvc2l0aW9uc09uR3JpZC5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX19jaGFuZ2VDZWxsKHBvcywge3NvbGlkOiB0cnVlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19jaGFuZ2VDZWxsKHBvcywgZGF0YSA9IHt9KSB7XG4gICAgICAgIHRoaXMuZ3JpZFtwb3NdID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5ncmlkW3Bvc10sIGRhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxpZGVzQm90dG9tKCkge1xuICAgICAgICBpZiAodGhpcy5fcGllY2UuYm90dG9tUm93ID49IHRoaXMuX2dyaWRTaXplLmhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX19jb2xsaWRlcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxpZGVzTGVmdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BpZWNlLmxlZnRDb2wgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9fY29sbGlkZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jb2xsaWRlc1JpZ2h0KCkge1xuICAgICAgICBpZiAodGhpcy5fcGllY2UucmlnaHRDb2wgPj0gdGhpcy5fZ3JpZFNpemUud2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX19jb2xsaWRlcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19jb2xsaWRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BpZWNlLnBvc2l0aW9uc09uR3JpZFxuICAgICAgICAgICAgLnNvbWUoKHBvcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiAwICYmIHRoaXMuZ3JpZFtwb3NdICYmIHRoaXMuZ3JpZFtwb3NdLnNvbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPbkluaXQsIE91dHB1dH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0dhbWVNYW5hZ2VyU2VydmljZSwgVGlsZX0gZnJvbSAnLi9zZXJ2aWNlcy9nYW1lLW1hbmFnZXIuc2VydmljZSc7XG5cbmNvbnN0IEdBTUVfU1BFRUQgPSA1MDA7XG5jb25zdCBNT1ZFX0RPV05fU1BFRUQgPSAwLjI7IC8vIGZyYWN0aW9uIG9mIGluaXRpYWwgZ2FtZSBzcGVlZFxuXG5leHBvcnQgZW51bSBHYW1lU3RhdGUge1xuICAgIFBhdXNlZCA9IDAsXG4gICAgU3RhcnRlZCA9IDEsXG4gICAgT3ZlciA9IDJcbn1cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0ZXRyaXMtY29yZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RldHJpcy1jb3JlLmNvbXBvbmVudC5odG1sJyxcbiAgICAvLyBzdHlsZVVybHM6IFsnLi90ZXRyaXMtY29yZS5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVGV0cmlzQ29yZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgICBASW5wdXQoKSB0aWxlU2l6ZTogYW55O1xuXG4gICAgQElucHV0KCkgaW5pdGlhbFNwZWVkOiBudW1iZXI7XG4gICAgQElucHV0KCkgcm90YXRlID0gZmFsc2U7XG4gICAgQElucHV0KCkgbW92ZUxlZnQgPSBmYWxzZTtcbiAgICBASW5wdXQoKSBtb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICBASW5wdXQoKSBtb3ZlRG93biA9IGZhbHNlO1xuICAgIEBJbnB1dCgpIHN0YXJ0ID0gZmFsc2U7XG4gICAgQElucHV0KCkgc3RvcCA9IGZhbHNlO1xuICAgIEBJbnB1dCgpIHJlc2V0ID0gZmFsc2U7XG5cbiAgICBAT3V0cHV0KCkgbGluZUNsZWFyZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIEBPdXRwdXQoKSBnYW1lT3ZlcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBwdWJsaWMgZ3JpZDogQXJyYXk8VGlsZT47XG4gICAgcHVibGljIHN0YXRlOiBHYW1lU3RhdGUgPSBHYW1lU3RhdGUuUGF1c2VkO1xuXG4gICAgZ3JpZFdpZHRoID0gMTA7XG4gICAgZ3JpZEhlaWdodCA9IDIwO1xuXG4gICAgcHJpdmF0ZSBfbW92ZURvd25TcGVlZDtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hbmFnZXI6IEdhbWVNYW5hZ2VyU2VydmljZSkge1xuICAgICAgICB0aGlzLl9tYW5hZ2VyLmxpbmVDbGVhcmVkJC5zdWJzY3JpYmUoKGRhdGEpID0+IHRoaXMuX29uTGluZUNsZWFyZWQoZGF0YSkpO1xuICAgICAgICB0aGlzLl9tYW5hZ2VyLmdhbWVPdmVyJC5zdWJzY3JpYmUoKGRhdGEpID0+IHRoaXMuX29uR2FtZU92ZXIoZGF0YSkpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgdGhpcy5pbml0aWFsU3BlZWQgPSB0aGlzLmluaXRpYWxTcGVlZCB8fCBHQU1FX1NQRUVEO1xuICAgICAgdGhpcy5fbW92ZURvd25TcGVlZCA9IHRoaXMuaW5pdGlhbFNwZWVkICogTU9WRV9ET1dOX1NQRUVEO1xuXG4gICAgICB0aGlzLl9tYW5hZ2VyLmluaXRpYWxpemUodGhpcy5ncmlkV2lkdGgsIHRoaXMuZ3JpZEhlaWdodCwgdGhpcy5pbml0aWFsU3BlZWQsIHRoaXMudGlsZVNpemUpO1xuICAgICAgdGhpcy5ncmlkID0gdGhpcy5fbWFuYWdlci5ncmlkO1xuXG4gICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm1vdmVEb3duKSB7XG4gICAgICAgICAgdGhpcy5fbWFuYWdlci5tb3ZlRG93bigpO1xuICAgICAgICB9XG5cbiAgICAgIH0sIHRoaXMuX21vdmVEb3duU3BlZWQpO1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5tb3ZlTGVmdCkpIHtcbiAgICAgICAgICAgIHRoaXMuX21hbmFnZXIubW92ZUxlZnQoKTtcblxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5tb3ZlUmlnaHQpKSB7XG4gICAgICAgICAgICB0aGlzLl9tYW5hZ2VyLm1vdmVSaWdodCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5yb3RhdGUpKSB7IHRoaXMuX21hbmFnZXIucm90YXRlKCk7IH1cbiAgICAgICAgaWYgKHRoaXMuX2tleVByZXNzZWQoY2hhbmdlcy5zdGFydCkpICB7IHRoaXMuX21hbmFnZXIuc3RhcnQoKTsgfVxuICAgICAgICBpZiAodGhpcy5fa2V5UHJlc3NlZChjaGFuZ2VzLnN0b3ApKSAgeyB0aGlzLl9tYW5hZ2VyLnN0b3AoKTsgfVxuICAgICAgICBpZiAodGhpcy5fa2V5UHJlc3NlZChjaGFuZ2VzLnJlc2V0KSkgIHsgdGhpcy5fbWFuYWdlci5yZXNldCgpOyB9XG4gICAgfVxuXG4gICAgcHVibGljIGFjdGlvbkxlZnQoKSB7IHRoaXMuX21hbmFnZXIubW92ZUxlZnQoKTsgfVxuICAgIHB1YmxpYyBhY3Rpb25SaWdodCgpIHsgdGhpcy5fbWFuYWdlci5tb3ZlUmlnaHQoKTsgfVxuICAgIHB1YmxpYyBhY3Rpb25Sb3RhdGUoKSB7IHRoaXMuX21hbmFnZXIucm90YXRlKCk7IH1cbiAgICBwdWJsaWMgYWN0aW9uRG93bigpIHsgdGhpcy5fbWFuYWdlci5tb3ZlRG93bigpOyB9XG4gICAgcHVibGljIGFjdGlvblJlc2V0KCkgeyB0aGlzLl9tYW5hZ2VyLnJlc2V0KCk7IH1cblxuICAgIHB1YmxpYyBhY3Rpb25TdGFydCgpIHtcbiAgICAgICAgdGhpcy5fbWFuYWdlci5zdGFydCgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gR2FtZVN0YXRlLlN0YXJ0ZWQ7XG4gICAgfVxuICAgIHB1YmxpYyBhY3Rpb25TdG9wKCkge1xuICAgICAgICB0aGlzLl9tYW5hZ2VyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEdhbWVTdGF0ZS5QYXVzZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfa2V5UHJlc3NlZChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSAmJiBrZXkuY3VycmVudFZhbHVlICYmICFrZXkucHJldmlvdXNWYWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vbkxpbmVDbGVhcmVkKGRhdGEpIHtcbiAgICAgICAgdGhpcy5saW5lQ2xlYXJlZC5lbWl0KGRhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX29uR2FtZU92ZXIoZGF0YSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gR2FtZVN0YXRlLk92ZXI7XG4gICAgICAgIHRoaXMuZ2FtZU92ZXIuZW1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gICAgQ29tcG9uZW50LFxuICAgIEVsZW1lbnRSZWYsXG4gICAgSW5wdXQsXG4gICAgT25Jbml0LFxuICAgIFJlbmRlcmVyMixcbiAgICBWaWV3RW5jYXBzdWxhdGlvblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7R2FtZU1hbmFnZXJTZXJ2aWNlLCBUaWxlfSBmcm9tICcuLi9zZXJ2aWNlcy9nYW1lLW1hbmFnZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndGlsZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RpbGUuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3RpbGUuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1tzdHlsZS53aWR0aF0nOiAndGlsZVNpemUnLFxuICAgICAgICAnW3N0eWxlLmhlaWdodF0nOiAndGlsZVNpemUnXG4gICAgfVxufSlcbmV4cG9ydCBjbGFzcyBUaWxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgICBASW5wdXQoKSBkYXRhOiBUaWxlO1xuICAgIHB1YmxpYyB0aWxlU2l6ZSA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGVsOiBFbGVtZW50UmVmLFxuICAgICAgICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgICAgICBwcml2YXRlIF9tYW5hZ2VyOiBHYW1lTWFuYWdlclNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX21hbmFnZXIuc2V0dGluZ3MudGlsZVNpemUpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZVNpemUgPSB0aGlzLl9tYW5hZ2VyLnNldHRpbmdzLnRpbGVTaXplXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmNvbG9yKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHRoaXMuZGF0YS5jb2xvcik7XG4gICAgICAgIH1cblxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtHYW1lTWFuYWdlclNlcnZpY2UsIFRpbGV9IGZyb20gJy4uL3NlcnZpY2VzL2dhbWUtbWFuYWdlci5zZXJ2aWNlJztcbmltcG9ydCB7VGlsZUNvbXBvbmVudH0gZnJvbSBcIi4uL3RpbGUvdGlsZS5jb21wb25lbnRcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdib2FyZCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2JvYXJkLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9ib2FyZC5jb21wb25lbnQuY3NzJ10sXG4gICAgaG9zdDoge1xuICAgICAgICAnW3N0eWxlLndpZHRoXSc6ICdib2FyZFdpZHRoICsgXCJweFwiJyxcbiAgICB9XG59KVxuZXhwb3J0IGNsYXNzIEJvYXJkQ29tcG9uZW50IHtcbiAgICBASW5wdXQoKSBncmlkOiBBcnJheTxUaWxlPjtcbiAgICBAVmlld0NoaWxkKFRpbGVDb21wb25lbnQpIHRpbGU7XG4gICAgcHVibGljIGJvYXJkV2lkdGggPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbWFuYWdlcjogR2FtZU1hbmFnZXJTZXJ2aWNlKSB7XG5cbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tYW5hZ2VyLnNldHRpbmdzLnRpbGVTaXplKSB7XG4gICAgICAgICAgICBjb25zdCBiYiA9IHRoaXMudGlsZS5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgVElMRV9NQVJHSU4gPSAxOyAvL3B4XG4gICAgICAgICAgICBjb25zdCBvbmVUaWxlU3BhY2UgPSBiYi53aWR0aCArIDIgKiBUSUxFX01BUkdJTjtcbiAgICAgICAgICAgIHRoaXMuYm9hcmRXaWR0aCA9IG9uZVRpbGVTcGFjZSAqIHRoaXMuX21hbmFnZXIuZWxlbWVudHNJblJvdztcblxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbW1vbk1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7VGV0cmlzQ29yZUNvbXBvbmVudH0gZnJvbSAnLi90ZXRyaXMtY29yZS5jb21wb25lbnQnO1xuaW1wb3J0IHtCb2FyZENvbXBvbmVudH0gZnJvbSAnLi9ib2FyZC9ib2FyZC5jb21wb25lbnQnO1xuaW1wb3J0IHtHYW1lTWFuYWdlclNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvZ2FtZS1tYW5hZ2VyLnNlcnZpY2UnO1xuaW1wb3J0IHtUaWxlQ29tcG9uZW50fSBmcm9tICcuL3RpbGUvdGlsZS5jb21wb25lbnQnO1xuXG5leHBvcnQgKiBmcm9tICcuL3RldHJpcy1jb3JlLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGVcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBUZXRyaXNDb3JlQ29tcG9uZW50LFxuICAgICAgICBCb2FyZENvbXBvbmVudCxcbiAgICAgICAgVGlsZUNvbXBvbmVudFxuICAgIF0sXG4gICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIEdhbWVNYW5hZ2VyU2VydmljZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1RldHJpc0NvcmVDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIFRldHJpc0NvcmVNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KCk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IFRldHJpc0NvcmVNb2R1bGVcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTUFQUyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQUNJLFFBQVM7SUFDVCxTQUFVO0lBQ1YsVUFBVztJQUNYLFVBQVc7OzRCQUhYLEtBQUs7NEJBQ0wsTUFBTTs0QkFDTixPQUFPOzRCQUNQLE9BQU87OztJQUtQLE1BQU87SUFDUCxNQUFPO0lBQ1AsT0FBUTtJQUNSLElBQUs7SUFDTCxJQUFLO0lBQ0wsS0FBTTtJQUNOLElBQUs7SUFDTCxJQUFLOztzQkFQTCxHQUFHO3NCQUNILEdBQUc7c0JBQ0gsSUFBSTtzQkFDSixDQUFDO3NCQUNELENBQUM7c0JBQ0QsRUFBRTtzQkFDRixDQUFDO3NCQUNELENBQUM7OztJQUtELEtBQU0sV0FBVztJQUNqQixLQUFNLFdBQVc7SUFDakIsTUFBTyxZQUFZO0lBQ25CLEdBQUksU0FBUztJQUNiLEdBQUksU0FBUztJQUNiLElBQUssVUFBVTtJQUNmLEdBQUksU0FBUztJQUNiLEdBQUksU0FBUzs7Ozs7Ozs7O0lBaUJiLFlBQVksQ0FBQyxFQUFF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